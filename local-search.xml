<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>vue3 | isRef、unref、toRef、toRefs</title>
    <link href="/vue3-isRef%E3%80%81unref%E3%80%81toRef%E3%80%81toRefs/"/>
    <url>/vue3-isRef%E3%80%81unref%E3%80%81toRef%E3%80%81toRefs/</url>
    
    <content type="html"><![CDATA[<h2 id="isRef"><a href="#isRef" class="headerlink" title="isRef"></a>isRef</h2><p>检查某个值是否是<code>ref</code>。是返回<code>true</code>，否则返回<code>false</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> num = <span class="hljs-title function_">ref</span>(<span class="hljs-number">10</span>);<br><span class="hljs-keyword">const</span> num1 = <span class="hljs-number">20</span>;<br><span class="hljs-keyword">const</span> num2 = <span class="hljs-title function_">reactive</span>(&#123; <span class="hljs-attr">data</span>: <span class="hljs-number">30</span> &#125;);<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">isRef</span>(num)); <span class="hljs-comment">//true</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">isRef</span>(num1)); <span class="hljs-comment">//false</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">isRef</span>(num2)); <span class="hljs-comment">//false</span><br></code></pre></td></tr></table></figure><h2 id="unref"><a href="#unref" class="headerlink" title="unref()"></a>unref()</h2><p>如果参数是<code>ref</code>，则返回内部值，否则返回参数本身。<br>这是  <code>val = isRef(val) ? val.value : val</code>  计算的一个语法糖。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">unref</span>(num));<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">unref</span>(num1));<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">unref</span>(num2));<br></code></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9b582a6f16dc4ac6b629f152c0a48f98~tplv-k3u1fbpfcp-watermark.image"></p><h2 id="toRef"><a href="#toRef" class="headerlink" title="toRef"></a>toRef</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>基于响应式对象上的某个属性，创建一个对应的 ref。创建出来的 ref 会跟源属性保持同步：更改了 ref 的值就会更改源属性的值，反之亦然。</p><ul><li>参数一：操作对象</li><li>参数二：对象属性</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> val = <span class="hljs-title function_">reactive</span>(&#123;<br>  <span class="hljs-attr">num</span>: <span class="hljs-number">1</span>,<br>&#125;);<br><br><span class="hljs-keyword">const</span> numRef = <span class="hljs-title function_">toRef</span>(val, <span class="hljs-string">&quot;num&quot;</span>);<br><br><span class="hljs-comment">// 更改该 ref 会更新源属性</span><br>numRef.<span class="hljs-property">value</span>++;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(val.<span class="hljs-property">num</span>); <span class="hljs-comment">// 2</span><br><br><span class="hljs-comment">// 更改源属性也会更新该 ref</span><br>val.<span class="hljs-property">num</span>++;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(numRef.<span class="hljs-property">value</span>); <span class="hljs-comment">// 3</span><br></code></pre></td></tr></table></figure><h3 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h3><p><code>toRef()</code>  这个函数在你想把一个 prop 的 ref 传递给一个组合式函数时会很有用当我们向组件传递 props 数据时，如果想要某个数据同父组件同步更新。当  <code>toRef</code>  与组件 props 结合使用时，关于禁止对 props 做出更改的限制依然有效。尝试将新的值传递给 ref 等效于尝试直接更改 props，这是不允许的。在这种场景下，可以使用<code>watch</code>去监听我们定义<code>ref()</code>对象。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;template&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-modal</span> <span class="hljs-attr">:show</span>=<span class="hljs-string">&quot;props.visible&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-card</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 600px&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;编辑&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">:bordered</span>=<span class="hljs-string">&quot;false&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;huge&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">role</span>=<span class="hljs-string">&quot;dialog&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">aria-modal</span>=<span class="hljs-string">&quot;true&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    &gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">n-input</span> <span class="hljs-attr">v-model:value</span>=<span class="hljs-string">&quot;inputValue&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">n-input</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">footer</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex justify-end&quot;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">n-space</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;emits(&#x27;cancel&#x27;)&quot;</span>&gt;</span>取消<span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;emits(&#x27;save&#x27;, inputValue)&quot;</span>&gt;</span>确定<span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">n-space</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">n-card</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">n-modal</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">import</span> &#123; toRef, watch, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">const</span> props = defineProps&lt;&#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">visible</span>: boolean</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">value</span>: string</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;&gt;()</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">const</span> emits = defineEmits&lt;&#123;</span></span><br><span class="language-javascript"><span class="language-xml">    (<span class="hljs-attr">e</span>: <span class="hljs-string">&#x27;save&#x27;</span>, <span class="hljs-attr">data</span>: string): <span class="hljs-keyword">void</span></span></span><br><span class="language-javascript"><span class="language-xml">    (<span class="hljs-attr">e</span>: <span class="hljs-string">&#x27;cancel&#x27;</span>): <span class="hljs-keyword">void</span></span></span><br><span class="language-javascript"><span class="language-xml">  &#125;&gt;()</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">const</span> valueToRef = <span class="hljs-title function_">toRef</span>(props, <span class="hljs-string">&#x27;value&#x27;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">const</span> inputValue = <span class="hljs-title function_">ref</span>(props.<span class="hljs-property">value</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-title function_">watch</span>(</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-function">() =&gt;</span> valueToRef.<span class="hljs-property">value</span>,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> (inputValue.<span class="hljs-property">value</span> = v)</span></span><br><span class="language-javascript"><span class="language-xml">  )</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> visible = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">true</span>)<br><span class="hljs-keyword">const</span> inputValue = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&#x27;哈哈哈哈&#x27;</span>)<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSave</span> = (<span class="hljs-params">v: string</span>) =&gt; &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;v&#x27;</span>, v)<br>&#125;<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCancel</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  visible.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span><br>&#125;<br><br>&lt;<span class="hljs-title class_">Demo</span> :value=<span class="hljs-string">&quot;inputValue&quot;</span> :visible=<span class="hljs-string">&quot;visible&quot;</span> @save=<span class="hljs-string">&quot;handleSave&quot;</span> @cancel=<span class="hljs-string">&quot;handleCancel&quot;</span> /&gt;<br></code></pre></td></tr></table></figure><p><code>注：</code>视图更新的问题</p><p>参考： <a href="https://www.cnblogs.com/web-learn/p/16725393.html">https://www.cnblogs.com/web-learn/p/16725393.html</a></p><h2 id="toRefs"><a href="#toRefs" class="headerlink" title="toRefs()"></a>toRefs()</h2><p>将一个响应式对象转换为一个普通对象，这个普通对象的每个属性都指向源对象相应的属性的<code>ref</code>。每个单独的<code>ref</code>都是使用<code>toRef()</code>创建的。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> val = <span class="hljs-title function_">reactive</span>(&#123;<br>  <span class="hljs-attr">num</span>: <span class="hljs-number">1</span>,<br>&#125;);<br><br><span class="hljs-keyword">const</span> numRef = <span class="hljs-title function_">toRefs</span>(val);<br><br><span class="hljs-comment">// 更改该 ref 会更新源属性</span><br>numRef.<span class="hljs-property">num</span>.<span class="hljs-property">value</span>++;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(val.<span class="hljs-property">num</span>); <span class="hljs-comment">// 2</span><br><br><span class="hljs-comment">// 更改源属性也会更新该 ref</span><br>val.<span class="hljs-property">num</span>++;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(numRef.<span class="hljs-property">num</span>.<span class="hljs-property">value</span>); <span class="hljs-comment">// 3</span><br></code></pre></td></tr></table></figure><p><code>toRefs()</code>解构出来的对象不会失去响应性。</p><p>如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> obj = <span class="hljs-title function_">reactive</span>(&#123;<br>  <span class="hljs-attr">num</span>: <span class="hljs-number">10</span>,<br>  <span class="hljs-attr">num2</span>: <span class="hljs-number">20</span>,<br>&#125;);<br><br><span class="hljs-keyword">const</span> &#123; num1, num2 &#125; = <span class="hljs-title function_">toRefs</span>(obj);<br></code></pre></td></tr></table></figure><p><code>toRefs</code>  在调用时只会为源对象上可以枚举的属性创建 ref。如果要为可能还不存在的属性创建 ref，请改用  <a href="https://cn.vuejs.org/api/reactivity-utilities.html#toref"><code>toRef</code></a>。</p>]]></content>
    
    
    <categories>
      
      <category>vue3</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vue3 | shallowReactive 、shallowRef、triggerRef</title>
    <link href="/vue3-shallowReactive-shallowRef/"/>
    <url>/vue3-shallowReactive-shallowRef/</url>
    
    <content type="html"><![CDATA[<h2 id="shallowReactive"><a href="#shallowReactive" class="headerlink" title="shallowReactive"></a>shallowReactive</h2><p>使用 reactive 声明的变量为递归监听，使用 shallowReactive 声明的变量为非递归监听（通俗的讲就是 reactive 创建的对象将会被 vue 内部进行递归监听，可以监听到对象中的对象是否发生了改变从而更新视图，而 shallowReactive 创建的对象只能监听到首层对象的变化）。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script setup lang=<span class="hljs-string">&quot;ts&quot;</span>&gt;<br>  <span class="hljs-keyword">import</span> &#123; shallowReactive &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br>  <span class="hljs-keyword">const</span> state = <span class="hljs-title function_">shallowReactive</span>(&#123;<br>    <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">b</span>: &#123;<br>      <span class="hljs-attr">res</span>: <span class="hljs-number">2</span>,<br>      <span class="hljs-attr">c</span>: &#123;<br>        <span class="hljs-attr">res</span>: <span class="hljs-number">3</span>,<br>      &#125;,<br>    &#125;,<br>  &#125;)<br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCLick</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    state.<span class="hljs-property">a</span> = <span class="hljs-number">100</span><br>    state.<span class="hljs-property">b</span>.<span class="hljs-property">res</span> = <span class="hljs-number">200</span><br>    state.<span class="hljs-property">b</span>.<span class="hljs-property">c</span>.<span class="hljs-property">res</span> = <span class="hljs-number">300</span><br>  &#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;template&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-el</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex flex-col justify-center items-center w-full h-200&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>&#123;&#123; state.a &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>&#123;&#123; state.b.res &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>&#123;&#123; state.b.c.res &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handleCLick&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;!w-20&quot;</span>&gt;</span>点击<span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br>&lt;/template&gt;<br></code></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/02e3909c494145c9a39eae7676ad8746~tplv-k3u1fbpfcp-watermark.image"></p><h2 id="shallowRef"><a href="#shallowRef" class="headerlink" title="shallowRef"></a>shallowRef</h2><p>其中 shallowRef 为非递归监听，ref 为递归监听，与 shallowReactive 和 reactive 不同的是 shallowRef 和 ref 监听的对象首层是 value 这一层，只有当 value 发生改变时 shallowRef 声明的变量才会在视图上进行更新。<br><code>shallowRef</code>只有对  <code>.value</code>  的访问是响应式的。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;n-el&gt;&#123;&#123; state2.<span class="hljs-property">res</span> &#125;&#125;&lt;/n-el&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;!w-20&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handleCLick&quot;</span>&gt;</span>点击<span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span></span><br><br>......<br> <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCLick</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-comment">// state2.value.res = 9999 //不会触发</span><br>  &#125;<br></code></pre></td></tr></table></figure><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e517fb608a6649ef865b464ad80de5a6~tplv-k3u1fbpfcp-watermark.image"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCLick</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-comment">//会触发</span><br>  state2.<span class="hljs-property">value</span> = &#123;<br>    <span class="hljs-attr">res</span>: <span class="hljs-number">9999</span>,<br>  &#125;;<br>&#125;;<br></code></pre></td></tr></table></figure><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dcf46ed944ca4583a2b4bd17c2f32bec~tplv-k3u1fbpfcp-watermark.image"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript">    &lt;n-el&gt;&#123;&#123; state2.<span class="hljs-property">res</span> &#125;&#125;&lt;/n-el&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>&#123;&#123; state2.res2.data &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>&#123;&#123; state2.res2.res3.data &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;!w-20&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handleCLick&quot;</span>&gt;</span>点击<span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span></span><br><br>......<br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCLick</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    state2.<span class="hljs-property">value</span> = &#123;<br>      <span class="hljs-attr">res</span>: <span class="hljs-number">100</span>,<br>      <span class="hljs-attr">res2</span>: &#123;<br>        <span class="hljs-attr">data</span>: <span class="hljs-number">200</span>,<br>        <span class="hljs-attr">res3</span>: &#123;<br>          <span class="hljs-attr">data</span>: <span class="hljs-number">300</span>,<br>        &#125;,<br>      &#125;,<br>    &#125;<br>  &#125;<br></code></pre></td></tr></table></figure><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e651404777e947f081ba08c012163757~tplv-k3u1fbpfcp-watermark.image"></p><h2 id="triggerRef"><a href="#triggerRef" class="headerlink" title="triggerRef"></a>triggerRef</h2><p>triggerRef 的作用则是手动执行与 shallowRef 关联的任何副作用，强制更新视图。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCLick</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  state.<span class="hljs-property">value</span>.<span class="hljs-property">a</span> = <span class="hljs-number">100</span><br>  state.<span class="hljs-property">value</span>.<span class="hljs-property">b</span>.<span class="hljs-property">res</span> = <span class="hljs-number">200</span><br>  state.<span class="hljs-property">value</span>.<span class="hljs-property">b</span>.<span class="hljs-property">c</span>.<span class="hljs-property">res</span> = <span class="hljs-number">300</span><br>  state2.<span class="hljs-property">value</span>.<span class="hljs-property">res</span> = <span class="hljs-number">9999</span><br>  <span class="hljs-title function_">triggerRef</span>(state2)<br>&#125;<br><br><br>......<br> &lt;n-el&gt;&#123;&#123; state2.<span class="hljs-property">res</span> &#125;&#125;&lt;/n-el&gt;<br> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>&#123;&#123; state2.res2.data &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>&#123;&#123; state2.res2.res3.data &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;!w-20&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handleCLick&quot;</span>&gt;</span>点击<span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ace01d4175634045b60ec0b4ff7a0808~tplv-k3u1fbpfcp-watermark.image"></p><p>参考文档：</p><p>1、<a href="https://www.jianshu.com/p/4e0d4fcff950">https://www.jianshu.com/p/4e0d4fcff950</a></p><p>2、<a href="https://blog.csdn.net/zxBlogs/article/details/114546382">https://blog.csdn.net/zxBlogs/article/details/114546382</a></p>]]></content>
    
    
    <categories>
      
      <category>vue3</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vue3 | slots</title>
    <link href="/vue3-slots/"/>
    <url>/vue3-slots/</url>
    
    <content type="html"><![CDATA[<h1 id="一、什么是插槽"><a href="#一、什么是插槽" class="headerlink" title="一、什么是插槽"></a>一、什么是插槽</h1><p><strong>插槽</strong>就是子组件中的提供给父组件使用的一个<strong>占位符</strong>，用<code>&lt;slot&gt;&lt;/slot&gt;</code>  表示，父组件可以在这个占位符中填充任何模板代码，如 HTML、组件等，填充的内容会替换子组件的<code>&lt;slot&gt;&lt;/slot&gt;</code>标签，父组件填充的内容称为<strong>插槽内容</strong>。</p><ul><li>子组件不提供插槽时，父组件填充失效</li><li>父组件无填充时，<code>&lt;slot&gt;&lt;/slot&gt;</code>中的<strong>备用内容</strong>会启用生效</li><li>父级模板里的所有内容都是在父级作用域中编译的，子模板里的所有内容都是在子作用域中编译的，互不影响</li></ul><h1 id="二、匿名插槽（默认插槽）"><a href="#二、匿名插槽（默认插槽）" class="headerlink" title="二、匿名插槽（默认插槽）"></a>二、匿名插槽（默认插槽）</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>在外部组件没有提供任何内容的情况下，可以使用匿名插槽提供默认内容。</p><h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><p>比如<br><code>MyComponent.vue</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;n-el&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span>这是一个默认展示的内容<span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br>&lt;/n-el&gt;<br><br><span class="hljs-comment">//组件使用</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyComponent</span>/&gt;</span></span><br></code></pre></td></tr></table></figure><p>如下：</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5f7cb2e4fabb4d0f8e0f2c4f17dfe13e~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>如果外部组件提供了插槽内容，我们提供的内容会覆盖掉默认的内容</p><p>如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">MyComponent</span>&gt;加入一段文字&lt;/<span class="hljs-title class_">MyComponent</span>&gt;<br></code></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fcace2a330894022851dfd36009649a0~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p><code>注：</code> 插槽内容可以是任意合法的模板内容，不局限于文本。</p><p>如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">MyComponent</span>&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-button</span>&gt;</span>加入一个按钮<span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span></span><br>&lt;/<span class="hljs-title class_">MyComponent</span>&gt;<br></code></pre></td></tr></table></figure><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2e6ea37a35ff41678177b3383c0f8ee7~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h1 id="三、具名插槽"><a href="#三、具名插槽" class="headerlink" title="三、具名插槽"></a>三、具名插槽</h1><h2 id="介绍-1"><a href="#介绍-1" class="headerlink" title="介绍"></a>介绍</h2><p><code>&lt;slot&gt;</code>元素带有 name 属性的插槽被称为具名插槽。</p><h2 id="使用场景-1"><a href="#使用场景-1" class="headerlink" title="使用场景"></a>使用场景</h2><p>作用于一个组件中拥有多个插槽，而<code>name</code>相当于插槽的标识，用来给各个插槽分配唯一的 ID。</p><p><code>MyComponent.vue</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;n-el <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;flex flex-col justify-center items-center h-[80vh] w-full&quot;</span>&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-el</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;text-[pink] text-[18px] mb-2&quot;</span>&gt;</span>组件相关内容<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;head&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;main&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;footer&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br>&lt;/n-el&gt;<br></code></pre></td></tr></table></figure><p>外部引用该组件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">MyComponent</span>&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot:head</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>这是头部内容<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot:main</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>这是主体内容<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot:footer</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>这是尾部内容<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot:no</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>组件中没有可匹配的插槽name，不显示<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>&lt;/<span class="hljs-title class_">MyComponent</span>&gt;<br></code></pre></td></tr></table></figure><p><code>v-slot</code>可以简写成<code>#</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">MyComponent</span>&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">head</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>这是头部内容<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">main</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>这是主体内容<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">footer</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>这是尾部内容<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">no</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>组件中没有可匹配的插槽name，不显示<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>&lt;/<span class="hljs-title class_">MyComponent</span>&gt;<br></code></pre></td></tr></table></figure><p>现在  <code>&lt;template&gt;</code>  元素中的所有内容都将被传递到相应的插槽。</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/70c05ad19c1b4839a92ea8d1c5652fe3~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2a194900097343ccb04d792893a5ece0~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p><code>注意：</code> 匿名插槽也有自己的<code>name</code>，只不过 name 会被隐式地命名为<code>default</code>。</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ab60634c7c7e4674a63af85766d62739~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>上面的写法等价于:</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/87c6836186464a22ae4c61689d16322c~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/69366fd463024b7796db3ad686f4dbdc~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h1 id="四、动态插槽名"><a href="#四、动态插槽名" class="headerlink" title="四、动态插槽名"></a>四、动态插槽名</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">MyComponent</span>&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot:</span>[<span class="hljs-attr">slotName</span>]&gt;</span></span><br><span class="language-xml">    ...</span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><br>  &lt;!-- 缩写为 --&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> #[<span class="hljs-attr">slotName</span>]&gt;</span></span><br><span class="language-xml">    ...</span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>&lt;/<span class="hljs-title class_">MyComponent</span>&gt;<br><br></code></pre></td></tr></table></figure><p>如下<br><code>MyComponent.vue</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;n-el&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>组件相关内容<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;head&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br>&lt;/n-el&gt;<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script setup lang=<span class="hljs-string">&quot;ts&quot;</span>&gt;<br>  <span class="hljs-keyword">const</span> data = <span class="hljs-string">&#x27;head&#x27;</span><br>&lt;/script&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">    ......</span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">MyComponent</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #[<span class="hljs-attr">data</span>]&gt;</span> 头部内容 <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">MyComponent</span>&gt;</span></span><br><span class="language-xml">    .......</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf234b04cf3e405c85c7770cbe8c92d2~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h1 id="五、作用域插槽"><a href="#五、作用域插槽" class="headerlink" title="五、作用域插槽"></a>五、作用域插槽</h1><h2 id="介绍-2"><a href="#介绍-2" class="headerlink" title="介绍"></a>介绍</h2><p>作用域插槽可以让父级外层组件能够访问子组件的数据，子组件向将数据提供给插槽，组件 props 传递数据的方式，子组件向插槽传递一个<code>attributes</code>，父组件通过<code>v-slot</code>带的值（任意命名）来获取子组件的数据。</p><h2 id="使用场景-2"><a href="#使用场景-2" class="headerlink" title="使用场景"></a>使用场景</h2><h3 id="一-、默认插槽"><a href="#一-、默认插槽" class="headerlink" title="(一)、默认插槽"></a>(一)、默认插槽</h3><p><code>MyComponent.vue</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;n-el <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;flex flex-col justify-center items-center h-[80vh] w-full&quot;</span>&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;螺蛳粉&quot;</span> <span class="hljs-attr">data</span>=<span class="hljs-string">&quot;10&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br>&lt;/n-el&gt;<br></code></pre></td></tr></table></figure><h4 id="写法一：-v-slot-写在组件上"><a href="#写法一：-v-slot-写在组件上" class="headerlink" title="写法一： v-slot 写在组件上"></a>写法一： v-slot 写在组件上</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">MyComponent</span> v-slot=<span class="hljs-string">&quot;res&quot;</span>&gt;<br>   <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>老板：来 &#123;&#123; res.data &#125;&#125; 份 &#123;&#123; res.content &#125;&#125; ~<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br> &lt;/<span class="hljs-title class_">MyComponent</span>&gt;<br></code></pre></td></tr></table></figure><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/39430b742a864b94a35f3946a68d0a20~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p><code>注意：</code> <code>v-slot=&quot;res&quot;</code>  可以类比这里的函数签名，和函数的参数类似，我们也可以在  <code>v-slot</code>  中使用解构：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">MyComponent</span> v-slot=<span class="hljs-string">&quot;&#123; data, content &#125;&quot;</span>&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">    老板：来 &#123;&#123; data &#125;&#125; 份 &#123;&#123; content &#125;&#125; ~</span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br>&lt;/<span class="hljs-title class_">MyComponent</span>&gt;<br></code></pre></td></tr></table></figure><h4 id="写法二：-v-slot-写在-template-上"><a href="#写法二：-v-slot-写在-template-上" class="headerlink" title="写法二： v-slot 写在 template 上"></a>写法二： v-slot 写在 template 上</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">MyComponent</span>&gt;<br>   <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot:default</span>=<span class="hljs-string">&quot;res&quot;</span>&gt;</span></span><br><span class="language-xml">     <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>老板：来 &#123;&#123; res.data &#125;&#125; 份 &#123;&#123; res.content &#125;&#125; ~<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">   <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><br>   <span class="hljs-comment">//或者</span><br>   <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>=<span class="hljs-string">&quot;res&quot;</span>&gt;</span></span><br><span class="language-xml">     <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>老板：来 &#123;&#123; res.data &#125;&#125; 份 &#123;&#123; res.content &#125;&#125; ~<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">   <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><br> &lt;/<span class="hljs-title class_">MyComponent</span>&gt;<br></code></pre></td></tr></table></figure><h3 id="二-、具名插槽"><a href="#二-、具名插槽" class="headerlink" title="(二)、具名插槽"></a>(二)、具名插槽</h3><p>具名作用域插槽的工作方式也是类似的，插槽 props 可以作为  <code>v-slot</code>  指令的值被访问到：<code>v-slot:name=&quot;slotProps&quot;</code>。当使用缩写时是这样：</p><p><code>MyComponent.vue</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;n-el <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;flex flex-col justify-center items-center h-[80vh] w-full&quot;</span>&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;北京烤鸭&quot;</span> <span class="hljs-attr">data</span>=<span class="hljs-string">&quot;5&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;food1&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;长沙臭豆腐&quot;</span> <span class="hljs-attr">data</span>=<span class="hljs-string">&quot;15&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;food2&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br>&lt;/n-el&gt;<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">MyComponent</span>&gt;<br>   <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">food1</span>=<span class="hljs-string">&quot;res&quot;</span>&gt;</span></span><br><span class="language-xml">     <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>老板：来 &#123;&#123; res.data &#125;&#125; 份 &#123;&#123; res.content &#125;&#125; ~<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">   <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>   <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">food2</span>=<span class="hljs-string">&quot;res&quot;</span>&gt;</span></span><br><span class="language-xml">     <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>老板：来 &#123;&#123; res.data &#125;&#125; 份 &#123;&#123; res.content &#125;&#125; ~<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">   <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br> &lt;/<span class="hljs-title class_">MyComponent</span>&gt;<br></code></pre></td></tr></table></figure><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c6af0f22883646c2b657d4b75c78352b~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>]]></content>
    
    
    <categories>
      
      <category>vue3</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vue-study</title>
    <link href="/vue-study/"/>
    <url>/vue-study/</url>
    
    <content type="html"><![CDATA[<h1 id="一、全局-API"><a href="#一、全局-API" class="headerlink" title="一、全局 API"></a>一、全局 API</h1><h2 id="一-、createApp"><a href="#一-、createApp" class="headerlink" title="(一)、createApp()"></a>(一)、createApp()</h2><p>创建一个应用实例。</p><p>内联根组件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(&#123;<br>  <span class="hljs-comment">//.....</span><br>&#125;);<br></code></pre></td></tr></table></figure><p>使用从别处导入的组件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./App.vue&quot;</span>;<br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>);<br></code></pre></td></tr></table></figure><h2 id="二-、app-mount"><a href="#二-、app-mount" class="headerlink" title="(二)、app.mount()"></a>(二)、app.mount()</h2><p>将应用实例挂载在一个容器元素中。</p><p>参数可以是一个实际的 DOM 元素或者一个 CSS 选择器</p><p>CSS 选择器为参数</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-comment">/* ... */</span>);<br>app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&quot;#app&quot;</span>);<br></code></pre></td></tr></table></figure><p>DOM 元素为参数</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">app.<span class="hljs-title function_">mount</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">firstChild</span>);<br></code></pre></td></tr></table></figure><h2 id="三-、app-unmount"><a href="#三-、app-unmount" class="headerlink" title="(三)、app.unmount()"></a>(三)、app.unmount()</h2><p>卸载一个已挂载的应用实例。</p><h2 id="四-、app-provide"><a href="#四-、app-provide" class="headerlink" title="(四)、app.provide()"></a>(四)、app.provide()</h2><p>提供一个值，可以给后代的所有组件使用</p><p>参数 1：注入的 key<br>参数 2：提供的值</p><p>示例：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-comment">/*...*/</span>);<br>app.<span class="hljs-title function_">provide</span>(<span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-string">&quot;hello&quot;</span>);<br></code></pre></td></tr></table></figure><p>后代组件使用</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; inject &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">inject</span>(<span class="hljs-string">&quot;message&quot;</span>)); <span class="hljs-comment">// &#x27;hello&#x27;</span><br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="五-、app-directive-自定义指令"><a href="#五-、app-directive-自定义指令" class="headerlink" title="(五)、app.directive 自定义指令"></a>(五)、app.directive 自定义指令</h2><p>参考文档：<a href="https://blog.csdn.net/weixin_52203618/article/details/127867548">https://blog.csdn.net/weixin_52203618/article/details/127867548</a></p><h2 id="六-、app-use-安装一个插件"><a href="#六-、app-use-安装一个插件" class="headerlink" title="(六)、app.use() 安装一个插件"></a>(六)、app.use() 安装一个插件</h2><ul><li>参数 1：插件本身</li><li>参数 2：传递给插件的选项</li></ul><h2 id="七-、app-mixin-混合"><a href="#七-、app-mixin-混合" class="headerlink" title="(七)、app.mixin()混合"></a>(七)、app.mixin()混合</h2><p>应用一个全局 mixin。一个全局的 mixin 会作用于应用中的每个组件实例。</p><h2 id="（八）、app-version"><a href="#（八）、app-version" class="headerlink" title="（八）、app.version"></a>（八）、app.version</h2><p>当前应用所使用的 vue 版本号。</p><h2 id="（九）、app-config-globalProperties"><a href="#（九）、app-config-globalProperties" class="headerlink" title="（九）、app.config.globalProperties"></a>（九）、app.config.globalProperties</h2><p>一个用于注册能够被应用内所有组件实例访问到的全局属性的对象。<br>用法</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">app.<span class="hljs-property">config</span>.<span class="hljs-property">globalProperties</span>.<span class="hljs-property">msg</span> = <span class="hljs-string">&quot;hello&quot;</span>;<br></code></pre></td></tr></table></figure><p>这使得 msg 在应用的任意组件模板上都可以使用，并且也可以通过任意组件实例的 this 访问到</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">msg</span>); <span class="hljs-comment">// &#x27;hello&#x27;</span><br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h1 id="二、通用-API"><a href="#二、通用-API" class="headerlink" title="二、通用 API"></a>二、通用 API</h1><h2 id="一-、version"><a href="#一-、version" class="headerlink" title="(一)、version"></a>(一)、version</h2><p>暴露当前所使用的 Vue 版本。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; version &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(version);<br></code></pre></td></tr></table></figure><h2 id="二-、nextTick"><a href="#二-、nextTick" class="headerlink" title="(二)、nextTick()"></a>(二)、nextTick()</h2><p>等待下一次 DOM 更新刷新的工具方法。</p><p>当你在 Vue 中更改响应式状态时，最周的 DOM 更新并不是同步生效的，而是由 Vue 将他们缓存在一个队列中，直到下一个”tick”才一起执行。这样是为了确保每个组件无论发生多少次状态改变，都仅执行一次更新。</p><p><code>nextTick()</code>可以在状态改变后立即使用，以等待 DOM 更新完成。你可以传递一个回调函数作为参数，或者<code>await</code>返回的<code>Promise</code>。</p><h1 id="三、组合式-API"><a href="#三、组合式-API" class="headerlink" title="三、组合式 API"></a>三、组合式 API</h1><h2 id="一-、readonly"><a href="#一-、readonly" class="headerlink" title="(一)、readonly()"></a>(一)、readonly()</h2><p>说明：接受一个<code>对象</code>（不管是响应式的还是普通的）或者是一个 ref，返回的是一个只读的原值。<br>细节：它是深层的。即不管原值是多少个子节点，孙节点，都是只读。<br>用途：保护某些数据不让它有意外的被修改。</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>hexo | 搭建个人网站</title>
    <link href="/hexo-start/"/>
    <url>/hexo-start/</url>
    
    <content type="html"><![CDATA[<h1 id="一、安装-hexo"><a href="#一、安装-hexo" class="headerlink" title="一、安装 hexo"></a>一、安装 hexo</h1>]]></content>
    
    
    <categories>
      
      <category>hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
