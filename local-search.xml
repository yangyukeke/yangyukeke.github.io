<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>【css面试篇】| 清除浮动</title>
    <link href="/css-%E6%B8%85%E9%99%A4%E6%B5%AE%E5%8A%A8/"/>
    <url>/css-%E6%B8%85%E9%99%A4%E6%B5%AE%E5%8A%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="（一）为什么需要清除浮动"><a href="#（一）为什么需要清除浮动" class="headerlink" title="（一）为什么需要清除浮动"></a>（一）为什么需要清除浮动</h2><p>我们浮动元素有一个标准的父元素，他们都有一个共同的特点，都是有高度的。但是，所有的父盒子都必须有高度吗？<br>理想中的状态，让子盒子撑开父亲，有多少孩子，父盒子就有多高。由于父级盒子在很多情况下，不方便给高度，但是子盒子浮动又不占位置，最后父级盒子高度为 0 时，就会影响下面的标准流盒子</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5773c54e8cab45caa08a281ad0e37655~tplv-k3u1fbpfcp-watermark.image" alt="image1.png"></p><p>由于浮动元素不再占有原文档流的位置，所以他会对后面的元素排版产生影响<br>，所以清除浮动的本质就是如此</p><p>总结：</p><ul><li>1、父级没有高度</li><li>2、子盒子浮动了</li><li>3、影响下面的布局，所以就应该清除浮动</li></ul><h2 id="（二）清除浮动的本质"><a href="#（二）清除浮动的本质" class="headerlink" title="（二）清除浮动的本质"></a>（二）清除浮动的本质</h2><ul><li>1、清除浮动的本质就是清除浮动元素造成的影响</li><li>2、如果父盒子本身有高度，则不需要清除浮动</li><li>3、清除浮动之后，父级就会根据浮动的子盒子自动检测高度。父级有了高度，就不会影响下面的标准流了。</li></ul><h2 id="（三）清除浮动的主要语法"><a href="#（三）清除浮动的主要语法" class="headerlink" title="（三）清除浮动的主要语法"></a>（三）清除浮动的主要语法</h2><pre><code class="hljs">选择器&#123;clear:属性值&#125;</code></pre><table><thead><tr><th>属性值</th><th>描述</th></tr></thead><tbody><tr><td>left</td><td>不允许左侧有浮动元素 （清除左侧浮动的影响）</td></tr><tr><td>right</td><td>不允许右侧有浮动元素（清除右侧浮动的影响）</td></tr><tr><td>both</td><td>同时清除左右两侧的影响</td></tr></tbody></table><p>在我们实际开发工作中，几乎只用 clear:both;<br>清除浮动的策略是：闭合浮动</p><h2 id="（四）清除浮动的方法"><a href="#（四）清除浮动的方法" class="headerlink" title="（四）清除浮动的方法"></a>（四）清除浮动的方法</h2><h3 id="1、额外标签法"><a href="#1、额外标签法" class="headerlink" title="1、额外标签法"></a>1、额外标签法</h3><p>也称隔墙法，是 W3C 推荐的做法<br>额外标签法会在浮动元素的末尾添加一个空的标签。例如<code>&lt;div style=&quot;clear:both&quot;&gt;&lt;/div&gt;</code>，或者其他标签（如<code>&lt;br/&gt;等</code>）</p><p>例子：</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e3c6466d985c439b97ca55beeb175ec3~tplv-k3u1fbpfcp-watermark.image" alt="image2.png"><br>没有清除浮动之前：</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e1534e5b102c446980b00cf7c2d194ee~tplv-k3u1fbpfcp-watermark.image" alt="image3.png"><br>清除浮动之后：</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/92fa260165f44424b88b5257e2e1dcb9~tplv-k3u1fbpfcp-watermark.image" alt="image4.png"></p><ul><li>优点：通俗易懂，书写方便</li><li>缺点：添加许多无意义的标签，结构比较差</li></ul><p>注意：要求这个添加的新的空标签必须是块级元素</p><h3 id="2、父级添加-overflow"><a href="#2、父级添加-overflow" class="headerlink" title="2、父级添加 overflow"></a>2、父级添加 overflow</h3><p>可以给父级添加 overflow 属性，将其属性设置为 hidden,auto 或 scroll。子不教父之过，注意是给父元素添加代码</p><ul><li>优点：代码简洁</li><li>缺点：无法显示溢出的部分，溢出隐藏</li></ul><h3 id="3、-after-伪元素法"><a href="#3、-after-伪元素法" class="headerlink" title="3、:after 伪元素法"></a>3、:after 伪元素法</h3><p>:after 方式是额外标签法的升级版。也是给父元素添加</p><pre><code class="hljs">.clearfix:after&#123;    content:&#39;&#39;;    display:block;    height:0;    clear:both;    visibility:hidden;&#125;</code></pre><!----><pre><code class="hljs">.clearfix&#123;    zoom:1&#125;</code></pre><ul><li>优点：没有增加标签，结构更简单，结构语义化正确</li><li>缺点：照顾低版本浏览器，IE6-7 不支持，有兼容性问题<br>代表网站：百度，淘宝网，网易等</li></ul><h3 id="4、双伪元素清除浮动"><a href="#4、双伪元素清除浮动" class="headerlink" title="4、双伪元素清除浮动"></a>4、双伪元素清除浮动</h3><p>也是给父元素添加</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.clearfix</span><span class="hljs-selector-pseudo">:before</span>,<span class="hljs-selector-class">.clearfix</span><span class="hljs-selector-pseudo">:after</span>&#123;<br>    <span class="hljs-attribute">content</span>:<span class="hljs-string">&#x27;&#x27;</span>;<br>    <span class="hljs-attribute">display</span>:table;<br>&#125;<br><span class="hljs-selector-class">.clearfix</span><span class="hljs-selector-pseudo">:after</span>&#123;<br>    <span class="hljs-attribute">clear</span>:both;<br>&#125;<br><span class="hljs-selector-class">.clearfix</span>&#123;<br>    zoom:<span class="hljs-number">1</span><br>&#125;<br><br></code></pre></td></tr></table></figure><ul><li>优点：代码更简洁，结构语义化正确</li><li>缺点：照顾低版本浏览器，IE6-7 不支持，有兼容性问题</li></ul><p>详细文档：<a href="https://juejin.cn/post/7261641986997551159">https://juejin.cn/post/7261641986997551159</a></p>]]></content>
    
    
    <categories>
      
      <category>css</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>支付宝小程序 | 上传图片组件(添加默认样式以及自定义上传样式)</title>
    <link href="/alipay-mini-program-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E7%BB%84%E4%BB%B6/"/>
    <url>/alipay-mini-program-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E7%BB%84%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>使用 my.uploadFile、 my.chooseImage 的方式实现图片上传</p><p><code>注意</code>： 使用该方式上传文件，后端也需要参照官方文档进行修改</p><p><a href="https://opendocs.alipay.com/mini/api/kmq4hc">https://opendocs.alipay.com/mini/api/kmq4hc</a></p><h1 id="一、展示效果"><a href="#一、展示效果" class="headerlink" title="一、展示效果"></a>一、展示效果</h1><h2 id="默认上传"><a href="#默认上传" class="headerlink" title="默认上传"></a>默认上传</h2><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2f7f0f4e4a2a49ad8d21c13d358db873~tplv-k3u1fbpfcp-watermark.image" alt="默认上传.gif"></p><h2 id="自定义上传"><a href="#自定义上传" class="headerlink" title="自定义上传"></a>自定义上传</h2><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/61b2be5b28164ae69783d7e93b703a79~tplv-k3u1fbpfcp-watermark.image" alt="自定义上传.gif"></p><h1 id="二、上代码"><a href="#二、上代码" class="headerlink" title="二、上代码"></a>二、上代码</h1><h2 id="一-、上传组件"><a href="#一-、上传组件" class="headerlink" title="(一)、上传组件"></a>(一)、上传组件</h2><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2082030540034d6cbc179080599de638~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;custom-upload-container&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">a:for</span>=<span class="hljs-string">&quot;&#123;&#123;imageUrl&#125;&#125;&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;custom-upload images-show&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;clear&quot;</span> <span class="hljs-attr">catchTap</span>=<span class="hljs-string">&quot;handleDelete&quot;</span> <span class="hljs-attr">data-url</span>=<span class="hljs-string">&quot;&#123;&#123;item&#125;&#125;&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">am-icon</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;CloseCircleFill&quot;</span> <span class="hljs-attr">color</span>=<span class="hljs-string">&quot;#333333&quot;</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;x-small&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">a:if</span>=<span class="hljs-string">&quot;&#123;&#123;item.status == &#x27;fail&#x27; ? true : false&#125;&#125;&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;loading&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">loading</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;spin&quot;</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;small&quot;</span> <span class="hljs-attr">text</span>=<span class="hljs-string">&quot;上传中...&quot;</span> <span class="hljs-attr">loading</span>=<span class="hljs-string">&quot;&#123;&#123;true&#125;&#125;&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">image</span></span><br><span class="hljs-tag">      <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;aspectFill&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;&#123;&#123;item&#125;&#125;&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">catchTap</span>=<span class="hljs-string">&quot;hanldeImageLook&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">data-url</span>=<span class="hljs-string">&quot;&#123;&#123;item&#125;&#125;&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">data-index</span>=<span class="hljs-string">&quot;&#123;&#123;index&#125;&#125;&quot;</span></span><br><span class="hljs-tag">    /&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">view</span></span><br><span class="hljs-tag">    <span class="hljs-attr">a:if</span>=<span class="hljs-string">&quot;&#123;&#123;imageUrl.length &lt; maxCount &amp;&amp; imageUrl.length &gt; 0 ? true:false&#125;&#125;&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;custom-upload &quot;</span></span><br><span class="hljs-tag">  &gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;add&quot;</span> <span class="hljs-attr">catchTap</span>=<span class="hljs-string">&quot;handleSelectImage&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">am-icon</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;AddOutline&quot;</span> <span class="hljs-attr">color</span>=<span class="hljs-string">&quot;#333333&quot;</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;small&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">catchTap</span>=<span class="hljs-string">&quot;handleSelectImage&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width:100%&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">a:if</span>=<span class="hljs-string">&quot;&#123;&#123; imageUrl.length == 0 ?true:false &#125;&#125;&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;default-upload&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">am-icon</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;AddOutline&quot;</span> <span class="hljs-attr">color</span>=<span class="hljs-string">&quot;#333333&quot;</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;small&quot;</span> /&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br></code></pre></td></tr></table></figure><p><code>upload-image.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-title class_">Component</span>(&#123;<br>  <span class="hljs-attr">mixins</span>: [],<br>  <span class="hljs-attr">data</span>: &#123;<br>    <span class="hljs-attr">imageUrl</span>: [],<br>    <span class="hljs-attr">maxCount</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">action</span>: <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-comment">//上传的url地址</span><br>  &#125;,<br>  <span class="hljs-attr">props</span>: &#123;<br>    <span class="hljs-attr">maxCount</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">onUpload</span>: <span class="hljs-function">(<span class="hljs-params">image, imageArr</span>) =&gt;</span> &#123;&#125;,<br>    <span class="hljs-attr">onDelete</span>: <span class="hljs-function">(<span class="hljs-params">image, imageArr</span>) =&gt;</span> &#123;&#125;,<br>    <span class="hljs-attr">value</span>: [],<br>    <span class="hljs-attr">action</span>: <span class="hljs-string">&quot;&quot;</span>,<br>  &#125;,<br>  <span class="hljs-title function_">didMount</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> maxCount = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>?.<span class="hljs-property">maxCount</span> || <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">const</span> value = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>?.<span class="hljs-property">value</span> || [];<br>    <span class="hljs-keyword">const</span> action = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>?.<span class="hljs-property">action</span> || <span class="hljs-string">&quot;xxxxxxxx&quot;</span>;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>(&#123;<br>      maxCount,<br>      <span class="hljs-attr">imageUrl</span>: value,<br>      action,<br>    &#125;);<br>  &#125;,<br>  <span class="hljs-title function_">didUpdate</span>(<span class="hljs-params"></span>) &#123;&#125;,<br>  <span class="hljs-title function_">didUnmount</span>(<span class="hljs-params"></span>) &#123;&#125;,<br>  <span class="hljs-attr">methods</span>: &#123;<br>    <span class="hljs-title function_">handleSelectImage</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">const</span> &#123; imageUrl, maxCount &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>;<br>      <span class="hljs-keyword">if</span> (imageUrl.<span class="hljs-property">length</span> == maxCount) &#123;<br>        my.<span class="hljs-title function_">showToast</span>(&#123;<br>          <span class="hljs-attr">content</span>: <span class="hljs-string">`最多上传<span class="hljs-subst">$&#123;maxCount&#125;</span>张图片`</span>,<br>        &#125;);<br>        <span class="hljs-keyword">return</span>;<br>      &#125;<br>      my.<span class="hljs-title function_">chooseImage</span>(&#123;<br>        <span class="hljs-attr">sourceType</span>: [<span class="hljs-string">&quot;camera&quot;</span>, <span class="hljs-string">&quot;album&quot;</span>],<br>        <span class="hljs-attr">count</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>          <span class="hljs-keyword">const</span> path = res.<span class="hljs-property">apFilePaths</span>[<span class="hljs-number">0</span>];<br>          <span class="hljs-keyword">const</span> <span class="hljs-title class_">DeviceId</span> = my.<span class="hljs-title function_">getStorageSync</span>(&#123; <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;DeviceId&quot;</span> &#125;).<span class="hljs-property">data</span>;<br>          <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">ACCESS_TOKEN</span> = my.<span class="hljs-title function_">getStorageSync</span>(&#123; <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;__AT__&quot;</span> &#125;).<span class="hljs-property">data</span>;<br>          <span class="hljs-keyword">const</span> &#123; account &#125; = my.<span class="hljs-title function_">getStorageSync</span>(&#123; <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;userinfo&quot;</span> &#125;)<br>            .<span class="hljs-property">data</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>;<br>          <span class="hljs-keyword">const</span> &#123; action &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>;<br>          <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SYSTEM_ID</span> = my.<span class="hljs-title function_">getStorageSync</span>(&#123; <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;SyStemId&quot;</span> &#125;)<br>            .<span class="hljs-property">data</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>;<br>          my.<span class="hljs-title function_">uploadFile</span>(&#123;<br>            <span class="hljs-attr">url</span>: action,<br>            <span class="hljs-attr">fileType</span>: <span class="hljs-string">&quot;image&quot;</span>,<br>            <span class="hljs-attr">fileName</span>: <span class="hljs-string">&quot;file&quot;</span>,<br>            <span class="hljs-attr">filePath</span>: path,<br>            <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;file&quot;</span>,<br>            <span class="hljs-comment">//请求头信息</span><br>            <span class="hljs-attr">header</span>: &#123;<br>              <span class="hljs-title class_">DeviceId</span>: <span class="hljs-title class_">DeviceId</span>,<br>              <span class="hljs-attr">uname</span>: account,<br>              <span class="hljs-title class_">System</span>: <span class="hljs-variable constant_">SYSTEM_ID</span>,<br>            &#125;,<br>            <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>              <span class="hljs-keyword">const</span> value = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(res.<span class="hljs-property">data</span>);<br>              <span class="hljs-keyword">if</span> (value?.<span class="hljs-property">code</span> == <span class="hljs-number">200</span>) &#123;<br>                <span class="hljs-keyword">const</span> &#123; imageUrl &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>;<br>                <span class="hljs-keyword">const</span> newImageUrl = imageUrl.<span class="hljs-title function_">concat</span>(value?.<span class="hljs-property">data</span>);<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>(&#123;<br>                  <span class="hljs-attr">imageUrl</span>: newImageUrl,<br>                &#125;);<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">onUpload</span>(value?.<span class="hljs-property">data</span>, newImageUrl);<br>              &#125; <span class="hljs-keyword">else</span> &#123;<br>                my.<span class="hljs-title function_">showToast</span>(&#123;<br>                  <span class="hljs-attr">content</span>: value?.<span class="hljs-property">msg</span> || <span class="hljs-string">&quot;上传失败&quot;</span>,<br>                &#125;);<br>              &#125;<br>            &#125;,<br>            <span class="hljs-attr">fail</span>: <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>              my.<span class="hljs-title function_">showToast</span>(&#123;<br>                <span class="hljs-attr">content</span>: <span class="hljs-string">&quot;上传失败&quot;</span>,<br>              &#125;);<br>              <span class="hljs-keyword">const</span> &#123; imageUrl &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>;<br>              <span class="hljs-keyword">const</span> newImageUrl = imageUrl.<span class="hljs-title function_">concat</span>([]);<br>              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>(&#123;<br>                <span class="hljs-attr">imageUrl</span>: newImageUrl,<br>                <span class="hljs-attr">status</span>: <span class="hljs-string">&quot;fail&quot;</span>,<br>              &#125;);<br>            &#125;,<br>          &#125;);<br>        &#125;,<br>      &#125;);<br>    &#125;,<br>    <span class="hljs-title function_">handleDelete</span>(<span class="hljs-params">e</span>) &#123;<br>      <span class="hljs-keyword">const</span> &#123; url &#125; = e.<span class="hljs-property">currentTarget</span>.<span class="hljs-property">dataset</span>;<br>      <span class="hljs-keyword">const</span> &#123; imageUrl &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>;<br>      <span class="hljs-keyword">const</span> newData = imageUrl.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">i</span>) =&gt;</span> i !== url);<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>(&#123;<br>        <span class="hljs-attr">imageUrl</span>: newData,<br>      &#125;);<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">onDelete</span>(index, newData);<br>    &#125;,<br>    <span class="hljs-title function_">hanldeImageLook</span>(<span class="hljs-params">e</span>) &#123;<br>      <span class="hljs-keyword">const</span> &#123; imageUrl &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>;<br>      <span class="hljs-keyword">const</span> &#123; index &#125; = e.<span class="hljs-property">currentTarget</span>.<span class="hljs-property">dataset</span>;<br>      my.<span class="hljs-title function_">previewImage</span>(&#123;<br>        <span class="hljs-attr">current</span>: index, <span class="hljs-comment">// 当前显示图片</span><br>        <span class="hljs-attr">urls</span>: imageUrl,<br>        <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;debug----res&quot;</span>, res);<br>        &#125;,<br>        <span class="hljs-attr">fail</span>: <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;<br>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;debug----error&quot;</span>, error);<br>        &#125;,<br>      &#125;);<br>    &#125;,<br>  &#125;,<br>&#125;);<br></code></pre></td></tr></table></figure><p><code>upload-image.less</code></p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-class">.custom-upload-container</span> &#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">flex-direction</span>: row;<br>  <span class="hljs-attribute">flex-wrap</span>: wrap;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-number">#ffffff</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">16px</span>;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;<br>  <span class="hljs-selector-class">.custom-upload</span>,<br>  <span class="hljs-selector-class">.images-show</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">80px</span>;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">80px</span>;<br>    <span class="hljs-attribute">background</span>: <span class="hljs-number">#ffffff</span>;<br>    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> dashed <span class="hljs-number">#979797</span>;<br>    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;<br>    <span class="hljs-attribute">display</span>: flex;<br>    <span class="hljs-attribute">justify-content</span>: center;<br>    <span class="hljs-attribute">align-items</span>: center;<br>    <span class="hljs-attribute">position</span>: relative;<br>    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">30px</span>;<br>    <span class="hljs-selector-class">.add</span> &#123;<br>      <span class="hljs-attribute">position</span>: absolute;<br>      <span class="hljs-attribute">margin</span>: auto;<br>    &#125;<br>    <span class="hljs-selector-class">.clear</span> &#123;<br>      <span class="hljs-attribute">position</span>: absolute;<br>      <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;<br>      <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;<br>      <span class="hljs-attribute">margin-top</span>: -<span class="hljs-number">6px</span>;<br>      <span class="hljs-attribute">margin-right</span>: -<span class="hljs-number">6px</span>;<br>    &#125;<br>    &gt; <span class="hljs-selector-tag">image</span> &#123;<br>      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;<br>      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;<br>      <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;<br>    &#125;<br>    <span class="hljs-selector-class">.loading</span> &#123;<br>      <span class="hljs-attribute">position</span>: absolute;<br>      <span class="hljs-attribute">margin</span>: auto;<br>      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;<br>      <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>);<br>      <span class="hljs-selector-class">.amd-loading-spin-container</span> &#123;<br>        <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;<br>      &#125;<br>      <span class="hljs-selector-class">.amd-loading-spin-text</span> &#123;<br>        <span class="hljs-attribute">color</span>: <span class="hljs-number">#ffff</span>;<br>      &#125;<br>    &#125;<br>  &#125;<br>  <span class="hljs-selector-class">.custom-upload</span><span class="hljs-selector-pseudo">:nth-of-type</span>(<span class="hljs-number">3</span>n) &#123;<br>    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">0px</span>;<br>  &#125;<br>  <span class="hljs-selector-class">.images-show</span> &#123;<br>    <span class="hljs-attribute">border</span>: none;<br>  &#125;<br><br>  <span class="hljs-selector-class">.default-upload</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">80px</span>;<br>    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;<br>    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> dashed <span class="hljs-number">#979797</span>;<br>    <span class="hljs-attribute">display</span>: flex;<br>    <span class="hljs-attribute">justify-content</span>: center;<br>    <span class="hljs-attribute">align-items</span>: center;<br>    <span class="hljs-attribute">background</span>: <span class="hljs-number">#ffffff</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>upload-image.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;component&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;usingComponents&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;am-icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;antd-mini/es/Icon/index&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;loading&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;antd-mini/es/Loading/index&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="二-、在页面中引用组件"><a href="#二-、在页面中引用组件" class="headerlink" title="(二)、在页面中引用组件"></a>(二)、在页面中引用组件</h2><p><code>pageX.axml</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//自定义上传样式</span><br>&lt;upload-image<br>  maxCount=<span class="hljs-string">&quot;&#123;&#123;imgCount&#125;&#125;&quot;</span><br>  value=<span class="hljs-string">&quot;&#123;&#123;imgValue&#125;&#125;&quot;</span><br>  onUpload=<span class="hljs-string">&quot;handleUpload&quot;</span><br>  onDelete=<span class="hljs-string">&quot;handleDelete&quot;</span><br>&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;uplload-images&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">text</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tip1&quot;</span>&gt;</span>添加图片（非必传）<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">text</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tip2&quot;</span>&gt;</span>最多可以添加&#123;&#123;imgCount&#125;&#125;张图片<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br>&lt;/upload-image&gt;<br><br><span class="hljs-comment">//默认样式</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">upload-image</span></span></span><br><span class="hljs-tag"><span class="language-xml">  <span class="hljs-attr">maxCount</span>=<span class="hljs-string">&quot;&#123;&#123;imgCount&#125;&#125;&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">  <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;&#123;&#123;imgValue&#125;&#125;&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">  <span class="hljs-attr">onUpload</span>=<span class="hljs-string">&quot;handleUpload&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">  <span class="hljs-attr">onDelete</span>=<span class="hljs-string">&quot;handleDelete&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">upload-image</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p><code>pageX.less</code></p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-class">.uplload-images</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">80px</span>;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-number">#ffffff</span>;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">flex-direction</span>: column;<br>  <span class="hljs-attribute">justify-content</span>: center;<br>  <span class="hljs-attribute">align-items</span>: center;<br>  <span class="hljs-selector-class">.tip1</span> &#123;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;<br>    <span class="hljs-attribute">font-family</span>: PingFangSC-Regular, PingFang SC;<br>    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">400</span>;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#333333</span>;<br>    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">20px</span>;<br>  &#125;<br>  <span class="hljs-selector-class">.tip2</span> &#123;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;<br>    <span class="hljs-attribute">font-family</span>: PingFangSC-Regular, PingFang SC;<br>    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">400</span>;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#999999</span>;<br>    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">16px</span>;<br>    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">8px</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>pageX.json</code></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs awk">&#123;<br>  <span class="hljs-string">&quot;defaultTitle&quot;</span>: <span class="hljs-string">&quot;上传图片&quot;</span>,<br>  <span class="hljs-string">&quot;usingComponents&quot;</span>: &#123;<br>       <span class="hljs-string">&quot;upload-image&quot;</span>:<span class="hljs-string">&quot;/components/upload-image/upload-image&quot;</span> <span class="hljs-regexp">//</span> 组件的路径<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><code>pageX.ts</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-attr">data</span>:&#123;<br>  <span class="hljs-attr">imgValue</span>:[],<br>  <span class="hljs-attr">imgCount</span>:<span class="hljs-number">3</span>,<br> &#125;,<br> <span class="hljs-title function_">handleUpload</span>(<span class="hljs-params">file, fileList</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>(&#123;<br>      <span class="hljs-attr">imgValue</span>: fileList,<br>    &#125;)<br> &#125;,<br>  <span class="hljs-title function_">handleDelete</span>(<span class="hljs-params">file, fileList</span>) &#123;<br>  <span class="hljs-keyword">const</span> arr = []<br>  <span class="hljs-keyword">let</span> &#123; deleteImage &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span><br>  arr.<span class="hljs-title function_">push</span>(file)<br>  <span class="hljs-keyword">const</span> newImage = deleteImage.<span class="hljs-title function_">concat</span>(arr)<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>(&#123;<br>    <span class="hljs-attr">imgValue</span>: fileList,<br>    <span class="hljs-attr">deleteImage</span>: newImage,<br>  &#125;)<br>&#125;,<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>支付宝小程序</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>支付宝小程序 | ucharts 图表的基本使用</title>
    <link href="/alipay-mini-program-ucharts-basic-use/"/>
    <url>/alipay-mini-program-ucharts-basic-use/</url>
    
    <content type="html"><![CDATA[<h1 id="展示"><a href="#展示" class="headerlink" title="展示"></a>展示</h1><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9ccc5a0169e545e09cbdab60a219b50b~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><pre><code class="hljs">pnpm i @qiun/ucharts @qiun/my-ucharts</code></pre><h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><h2 id="折线图"><a href="#折线图" class="headerlink" title="折线图"></a>折线图</h2><h3 id="（一）、组件"><a href="#（一）、组件" class="headerlink" title="（一）、组件"></a>（一）、组件</h3><p><code>chart.xml</code></p><pre><code class="hljs">&lt;view class=&quot;charts-box&quot;&gt;  &lt;ucharts type=&quot;line&quot; opts=&quot;&#123;&#123;opts&#125;&#125;&quot; chartData=&quot;&#123;&#123;chartData&#125;&#125;&quot; /&gt;&lt;/view&gt;</code></pre><p><code>chart.less</code></p><pre><code class="hljs">.charts-box &#123;  width: 100%;  height: 300px;&#125;</code></pre><p><code>chart.json</code></p><pre><code class="hljs">&#123;  &quot;defaultTitle&quot;: &quot;ucharts图表&quot;,  &quot;usingComponents&quot;: &#123;    &quot;ucharts&quot;: &quot;@qiun/my-ucharts/src/index&quot;  &#125;&#125;</code></pre><p><code>chart.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-title class_">Page</span>(&#123;<br>  <span class="hljs-attr">data</span>: &#123;<br>    <span class="hljs-attr">chartData</span>: &#123;&#125;,<br>    <span class="hljs-comment">//您可以通过修改 config-ucharts.js 文件中下标为 [&#x27;line&#x27;] 的节点来配置全局默认参数，如都是默认参数，此处可以不传 opts 。实际应用过程中 opts 只需传入与全局默认参数中不一致的【某一个属性】即可实现同类型的图表显示不同的样式，达到页面简洁的需求。</span><br>    <span class="hljs-attr">opts</span>: &#123;<br>      <span class="hljs-attr">color</span>: [<br>        <span class="hljs-string">&quot;#1890FF&quot;</span>,<br>        <span class="hljs-string">&quot;#91CB74&quot;</span>,<br>        <span class="hljs-string">&quot;#FAC858&quot;</span>,<br>        <span class="hljs-string">&quot;#EE6666&quot;</span>,<br>        <span class="hljs-string">&quot;#73C0DE&quot;</span>,<br>        <span class="hljs-string">&quot;#3CA272&quot;</span>,<br>        <span class="hljs-string">&quot;#FC8452&quot;</span>,<br>        <span class="hljs-string">&quot;#9A60B4&quot;</span>,<br>        <span class="hljs-string">&quot;#ea7ccc&quot;</span>,<br>      ],<br>      <span class="hljs-attr">padding</span>: [<span class="hljs-number">15</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>, <span class="hljs-number">15</span>],<br>      <span class="hljs-attr">enableScroll</span>: <span class="hljs-literal">false</span>,<br>      <span class="hljs-attr">legend</span>: &#123;&#125;,<br>      <span class="hljs-attr">xAxis</span>: &#123;<br>        <span class="hljs-attr">disableGrid</span>: <span class="hljs-literal">true</span>,<br>      &#125;,<br>      <span class="hljs-attr">yAxis</span>: &#123;<br>        <span class="hljs-attr">gridType</span>: <span class="hljs-string">&quot;dash&quot;</span>,<br>        <span class="hljs-attr">dashLength</span>: <span class="hljs-number">2</span>,<br>      &#125;,<br>      <span class="hljs-attr">extra</span>: &#123;<br>        <span class="hljs-attr">line</span>: &#123;<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;straight&quot;</span>,<br>          <span class="hljs-attr">width</span>: <span class="hljs-number">2</span>,<br>          <span class="hljs-attr">activeType</span>: <span class="hljs-string">&quot;hollow&quot;</span>,<br>        &#125;,<br>      &#125;,<br>    &#125;,<br>  &#125;,<br>  <span class="hljs-title function_">onReady</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getServerData</span>();<br>  &#125;,<br>  <span class="hljs-title function_">getServerData</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">//模拟从服务器获取数据时的延时</span><br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-comment">//模拟服务器返回数据，如果数据格式和标准格式不同，需自行按下面的格式拼接</span><br>      <span class="hljs-keyword">let</span> res = &#123;<br>        <span class="hljs-attr">categories</span>: [<span class="hljs-string">&quot;2018&quot;</span>, <span class="hljs-string">&quot;2019&quot;</span>, <span class="hljs-string">&quot;2020&quot;</span>, <span class="hljs-string">&quot;2021&quot;</span>, <span class="hljs-string">&quot;2022&quot;</span>, <span class="hljs-string">&quot;2023&quot;</span>],<br>        <span class="hljs-attr">series</span>: [<br>          &#123;<br>            <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;成交量A&quot;</span>,<br>            <span class="hljs-attr">data</span>: [<span class="hljs-number">35</span>, <span class="hljs-number">8</span>, <span class="hljs-number">25</span>, <span class="hljs-number">37</span>, <span class="hljs-number">4</span>, <span class="hljs-number">20</span>],<br>          &#125;,<br>          &#123;<br>            <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;成交量B&quot;</span>,<br>            <span class="hljs-attr">data</span>: [<span class="hljs-number">70</span>, <span class="hljs-number">40</span>, <span class="hljs-number">65</span>, <span class="hljs-number">100</span>, <span class="hljs-number">44</span>, <span class="hljs-number">68</span>],<br>          &#125;,<br>          &#123;<br>            <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;成交量C&quot;</span>,<br>            <span class="hljs-attr">data</span>: [<span class="hljs-number">100</span>, <span class="hljs-number">80</span>, <span class="hljs-number">95</span>, <span class="hljs-number">150</span>, <span class="hljs-number">112</span>, <span class="hljs-number">132</span>],<br>          &#125;,<br>        ],<br>      &#125;;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>(&#123; <span class="hljs-attr">chartData</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(res)) &#125;);<br>    &#125;, <span class="hljs-number">500</span>);<br>  &#125;,<br>&#125;);<br></code></pre></td></tr></table></figure><h3 id="（二）、原生工具"><a href="#（二）、原生工具" class="headerlink" title="（二）、原生工具"></a>（二）、原生工具</h3><p><code>chart.xml</code></p><pre><code class="hljs">&lt;canvas    id=&quot;&#123;&#123;canvasId&#125;&#125;&quot;    width=&quot;&#123;&#123;cWidth * pixelRatio&#125;&#125;&quot;    height=&quot;&#123;&#123;cHeight * pixelRatio&#125;&#125;&quot;    class=&quot;charts&quot;    onTouchEnd=&quot;tap&quot;  /&gt;</code></pre><p><code>chart.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> uCharts <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../../node_modules/@qiun/ucharts/u-charts&quot;</span>;<br><span class="hljs-keyword">var</span> uChartsInstance = &#123;&#125;;<br><span class="hljs-title class_">Page</span>(&#123;<br>  <span class="hljs-attr">data</span>: &#123;<br>    <span class="hljs-attr">cWidth</span>: <span class="hljs-number">750</span>,<br>    <span class="hljs-attr">cHeight</span>: <span class="hljs-number">500</span>,<br>    <span class="hljs-attr">pixelRatio</span>: <span class="hljs-number">2</span>,<br>    <span class="hljs-attr">canvasId</span>: <span class="hljs-string">&quot;OdfjlkdsjlkjljdklwLgvzJkfujdkljfkl&quot;</span>,<br>  &#125;,<br>  <span class="hljs-title function_">onReady</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">//这里的第一个 750 对应 css .charts 的 width1</span><br>    <span class="hljs-keyword">const</span> cWidth = (<span class="hljs-number">750</span> / <span class="hljs-number">750</span>) * my.<span class="hljs-title function_">getSystemInfoSync</span>().<span class="hljs-property">windowWidth</span>;<br>    <span class="hljs-comment">//这里的 500 对应 css .charts 的 height</span><br>    <span class="hljs-keyword">const</span> cHeight = (<span class="hljs-number">500</span> / <span class="hljs-number">750</span>) * my.<span class="hljs-title function_">getSystemInfoSync</span>().<span class="hljs-property">windowWidth</span>;<br>    <span class="hljs-keyword">const</span> pixelRatio = my.<span class="hljs-title function_">getSystemInfoSync</span>().<span class="hljs-property">pixelRatio</span>;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>(&#123; cWidth, cHeight, pixelRatio &#125;);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getServerData</span>();<br>  &#125;,<br>  <span class="hljs-title function_">getServerData</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">//模拟从服务器获取数据时的延时</span><br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-comment">//模拟服务器返回数据，如果数据格式和标准格式不同，需自行按下面的格式拼接</span><br>      <span class="hljs-keyword">let</span> res = &#123;<br>        <span class="hljs-attr">categories</span>: [<span class="hljs-string">&quot;2018&quot;</span>, <span class="hljs-string">&quot;2019&quot;</span>, <span class="hljs-string">&quot;2020&quot;</span>, <span class="hljs-string">&quot;2021&quot;</span>, <span class="hljs-string">&quot;2022&quot;</span>, <span class="hljs-string">&quot;2023&quot;</span>],<br>        <span class="hljs-attr">series</span>: [<br>          &#123;<br>            <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;成交量A&quot;</span>,<br>            <span class="hljs-attr">data</span>: [<span class="hljs-number">35</span>, <span class="hljs-number">8</span>, <span class="hljs-number">25</span>, <span class="hljs-number">37</span>, <span class="hljs-number">4</span>, <span class="hljs-number">20</span>],<br>          &#125;,<br>          &#123;<br>            <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;成交量B&quot;</span>,<br>            <span class="hljs-attr">data</span>: [<span class="hljs-number">70</span>, <span class="hljs-number">40</span>, <span class="hljs-number">65</span>, <span class="hljs-number">100</span>, <span class="hljs-number">44</span>, <span class="hljs-number">68</span>],<br>          &#125;,<br>          &#123;<br>            <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;成交量C&quot;</span>,<br>            <span class="hljs-attr">data</span>: [<span class="hljs-number">100</span>, <span class="hljs-number">80</span>, <span class="hljs-number">95</span>, <span class="hljs-number">150</span>, <span class="hljs-number">112</span>, <span class="hljs-number">132</span>],<br>          &#125;,<br>        ],<br>      &#125;;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">drawCharts</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">canvasId</span>, res);<br>    &#125;, <span class="hljs-number">500</span>);<br>  &#125;,<br>  <span class="hljs-title function_">drawCharts</span>(<span class="hljs-params">id, data</span>) &#123;<br>    <span class="hljs-keyword">const</span> ctx = my.<span class="hljs-title function_">createCanvasContext</span>(id);<br>    uChartsInstance[id] = <span class="hljs-keyword">new</span> <span class="hljs-title function_">uCharts</span>(&#123;<br>      <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;line&quot;</span>,<br>      <span class="hljs-attr">context</span>: ctx,<br>      <span class="hljs-attr">width</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">cWidth</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">pixelRatio</span>,<br>      <span class="hljs-attr">height</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">cHeight</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">pixelRatio</span>,<br>      <span class="hljs-attr">categories</span>: data.<span class="hljs-property">categories</span>,<br>      <span class="hljs-attr">series</span>: data.<span class="hljs-property">series</span>,<br>      <span class="hljs-attr">pixelRatio</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">pixelRatio</span>,<br>      <span class="hljs-attr">animation</span>: <span class="hljs-literal">true</span>,<br>      <span class="hljs-attr">background</span>: <span class="hljs-string">&quot;#FFFFFF&quot;</span>,<br>      <span class="hljs-attr">color</span>: [<br>        <span class="hljs-string">&quot;#1890FF&quot;</span>,<br>        <span class="hljs-string">&quot;#91CB74&quot;</span>,<br>        <span class="hljs-string">&quot;#FAC858&quot;</span>,<br>        <span class="hljs-string">&quot;#EE6666&quot;</span>,<br>        <span class="hljs-string">&quot;#73C0DE&quot;</span>,<br>        <span class="hljs-string">&quot;#3CA272&quot;</span>,<br>        <span class="hljs-string">&quot;#FC8452&quot;</span>,<br>        <span class="hljs-string">&quot;#9A60B4&quot;</span>,<br>        <span class="hljs-string">&quot;#ea7ccc&quot;</span>,<br>      ],<br>      <span class="hljs-attr">padding</span>: [<span class="hljs-number">15</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>, <span class="hljs-number">15</span>],<br>      <span class="hljs-attr">enableScroll</span>: <span class="hljs-literal">false</span>,<br>      <span class="hljs-attr">legend</span>: &#123;&#125;,<br>      <span class="hljs-attr">xAxis</span>: &#123;<br>        <span class="hljs-attr">disableGrid</span>: <span class="hljs-literal">true</span>,<br>      &#125;,<br>      <span class="hljs-attr">yAxis</span>: &#123;<br>        <span class="hljs-attr">gridType</span>: <span class="hljs-string">&quot;dash&quot;</span>,<br>        <span class="hljs-attr">dashLength</span>: <span class="hljs-number">2</span>,<br>      &#125;,<br>      <span class="hljs-attr">extra</span>: &#123;<br>        <span class="hljs-attr">line</span>: &#123;<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;straight&quot;</span>,<br>          <span class="hljs-attr">width</span>: <span class="hljs-number">2</span>,<br>          <span class="hljs-attr">activeType</span>: <span class="hljs-string">&quot;hollow&quot;</span>,<br>        &#125;,<br>      &#125;,<br>    &#125;);<br>  &#125;,<br>  <span class="hljs-title function_">tap</span>(<span class="hljs-params">e</span>) &#123;<br>    uChartsInstance[e.<span class="hljs-property">target</span>.<span class="hljs-property">id</span>].<span class="hljs-title function_">touchLegend</span>(e);<br>    uChartsInstance[e.<span class="hljs-property">target</span>.<span class="hljs-property">id</span>].<span class="hljs-title function_">showToolTip</span>(e);<br>  &#125;,<br>&#125;);<br></code></pre></td></tr></table></figure><p><code>chart.less</code></p><pre><code class="hljs">.charts &#123;  width: 750rpx;  height: 500rpx;&#125;</code></pre><h3 id="一些基础配置信息"><a href="#一些基础配置信息" class="headerlink" title="一些基础配置信息"></a>一些基础配置信息</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CHART_BASIC_CONFIG</span> = &#123;<br>  <span class="hljs-attr">animation</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">background</span>: <span class="hljs-string">&quot;#FFFFFF&quot;</span>,<br>  <span class="hljs-attr">enableScroll</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-attr">padding</span>: [<span class="hljs-number">8</span>, <span class="hljs-number">24</span>, <span class="hljs-number">24</span>, <span class="hljs-number">0</span>], <span class="hljs-comment">//边距：上右下左</span><br>  <span class="hljs-attr">dataLabel</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//是否显示图表区域内数据点上方的数据文案</span><br>  <span class="hljs-attr">dataPointShape</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-attr">legend</span>: &#123;<br>    <span class="hljs-attr">show</span>: <span class="hljs-literal">false</span>,<br>  &#125;,<br>  <span class="hljs-attr">xAxis</span>: &#123;<br>    <span class="hljs-attr">fontColor</span>: <span class="hljs-string">&quot;#999999&quot;</span>, <span class="hljs-comment">// 数据点（刻度点）字体颜色，默认#666666</span><br>    <span class="hljs-attr">fontSize</span>: <span class="hljs-number">12</span>, <span class="hljs-comment">// 数据点（刻度点）字体大小</span><br>    <span class="hljs-attr">axisLineColor</span>: <span class="hljs-string">&quot;#E5E5E5&quot;</span>, <span class="hljs-comment">//坐标轴颜色</span><br>    <span class="hljs-attr">disableGrid</span>: <span class="hljs-literal">true</span>,<br>  &#125;,<br>  <span class="hljs-attr">yAxis</span>: &#123;<br>    <span class="hljs-attr">gridType</span>: <span class="hljs-string">&quot;dash&quot;</span>,<br>    <span class="hljs-attr">dashLength</span>: <span class="hljs-number">2</span>,<br>    <span class="hljs-attr">gridColor</span>: <span class="hljs-string">&quot;#E5E5E5&quot;</span>, <span class="hljs-comment">//网格线颜色</span><br>    <span class="hljs-attr">splitNumber</span>: <span class="hljs-number">2</span>, <span class="hljs-comment">//限制y轴坐标的数量</span><br>    <span class="hljs-attr">data</span>: [<br>      &#123;<br>        <span class="hljs-attr">min</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">axisLineColor</span>: <span class="hljs-string">&quot;#FFFFFF&quot;</span>, <span class="hljs-comment">//坐标轴的颜色</span><br>        <span class="hljs-attr">fontColor</span>: <span class="hljs-string">&quot;#333333&quot;</span>, <span class="hljs-comment">// 数据点（刻度点）字体颜色，默认#666666</span><br>        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">12</span>, <span class="hljs-comment">// 数据点（刻度点）字体大小</span><br>        <span class="hljs-attr">textAlign</span>: <span class="hljs-string">&quot;right&quot;</span>, <span class="hljs-comment">//数据点（刻度点）相对轴线的对齐方式，可选值：&#x27;left&#x27;,&#x27;right&#x27;,&#x27;center&#x27;</span><br>        <span class="hljs-attr">splitNumber</span>: <span class="hljs-number">3</span>,<br>      &#125;,<br>    ],<br>  &#125;,<br>  <span class="hljs-attr">extra</span>: &#123;<br>    <span class="hljs-attr">column</span>: &#123;<br>      <span class="hljs-attr">activeBgColor</span>: <span class="hljs-string">&quot;#B0C3FF&quot;</span>, <span class="hljs-comment">//点击柱状图的颜色</span><br>      <span class="hljs-attr">activeBgOpacity</span>: <span class="hljs-number">0.08</span>,<br>      <span class="hljs-attr">labelPosition</span>: <span class="hljs-string">&quot;center&quot;</span>,<br>    &#125;,<br>    <span class="hljs-comment">//图例</span><br>    <span class="hljs-attr">tooltip</span>: &#123;<br>      <span class="hljs-attr">showArrow</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//显示小三角</span><br>      <span class="hljs-attr">borderRadius</span>: <span class="hljs-number">6</span>,<br>      <span class="hljs-attr">bgColor</span>: <span class="hljs-string">&quot;#000000&quot;</span>,<br>      <span class="hljs-attr">bgOpacity</span>: <span class="hljs-number">0.6</span>,<br>      <span class="hljs-attr">lineHeight</span>: <span class="hljs-number">24</span>,<br>      <span class="hljs-attr">fontSize</span>: <span class="hljs-number">14</span>,<br>      <span class="hljs-attr">legendShape</span>: <span class="hljs-string">&quot;circle&quot;</span>, <span class="hljs-comment">//圆形标识</span><br>      <span class="hljs-attr">splitLine</span>: <span class="hljs-literal">true</span>,<br>      <span class="hljs-attr">showCategory</span>: <span class="hljs-literal">true</span>,<br>    &#125;,<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><p>详情参考： <a href="https://www.ucharts.cn/v2/#/document/index">https://www.ucharts.cn/v2/#/document/index</a></p><p><code>tips:</code> 推荐使用原生，如果 canvas 外层有其他元素，或者使用定位，或者使用<code>scroll-view</code>元素等因素，会导致提示框不显示或提示框数据与图像数据不匹配等问题</p>]]></content>
    
    
    <categories>
      
      <category>支付宝小程序</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>支付宝小程序 | 获取网络状态</title>
    <link href="/alipay-mini-program-getnetwork/"/>
    <url>/alipay-mini-program-getnetwork/</url>
    
    <content type="html"><![CDATA[<p>参考文档：</p><ul><li><a href="https://opendocs.alipay.com/open/025653">https://opendocs.alipay.com/open/025653</a></li><li><a href="https://opendocs.alipay.com/mini/api/network-status">https://opendocs.alipay.com/mini/api/network-status</a></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 获取网络状态</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span> <span class="hljs-variable">networkAvailable</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span> <span class="hljs-variable">networkType</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getNetworkType</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">const</span> &#123; networkAvailable, networkType &#125; = <span class="hljs-keyword">await</span> my.<span class="hljs-title function_">getNetworkType</span>();<br>  <span class="hljs-keyword">return</span> &#123;<br>    networkAvailable,<br>    networkType,<br>  &#125;;<br>&#125;;<br></code></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ebe2ba32a3c449019f9442d0a194942a~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">onPullDownRefresh</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-comment">//使用封装的方法</span><br>  <span class="hljs-keyword">const</span> &#123; networkAvailable &#125; = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getNetworkType</span>()<br>  <span class="hljs-comment">//或者直接使用api</span><br>  <span class="hljs-comment">//const &#123; networkAvailable, networkType &#125; = await my.getNetworkType()</span><br>  <span class="hljs-keyword">if</span> (networkAvailable) &#123;<br>    <span class="hljs-comment">//TODO网络可用</span><br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    my.<span class="hljs-title function_">showToast</span>(&#123;<br>      <span class="hljs-attr">content</span>: <span class="hljs-string">&#x27;当前网络不可用，请检查网络&#x27;</span>,<br>    &#125;)<br>  &#125;<br>&#125;,<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>支付宝小程序</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>支付宝小程序 | 下拉刷新、自动刷新、上拉加载</title>
    <link href="/alipay-mini-program-refresh%E3%80%81load/"/>
    <url>/alipay-mini-program-refresh%E3%80%81load/</url>
    
    <content type="html"><![CDATA[<h1 id="下拉刷新"><a href="#下拉刷新" class="headerlink" title="下拉刷新"></a>下拉刷新</h1><h2 id="（一）onPullDownRefresh方法"><a href="#（一）onPullDownRefresh方法" class="headerlink" title="（一）onPullDownRefresh方法"></a>（一）onPullDownRefresh方法</h2><p>模拟器效果展示</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1c554de3eacb4893b8731ff2d95beaeb~tplv-k3u1fbpfcp-watermark.image" alt="demo.gif"></p><p>实现如下</p><h3 id="1、配置下拉选项"><a href="#1、配置下拉选项" class="headerlink" title="1、配置下拉选项"></a>1、配置下拉选项</h3><p><code>demo.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;pullRefresh&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="2、定义下拉方法"><a href="#2、定义下拉方法" class="headerlink" title="2、定义下拉方法"></a>2、定义下拉方法</h3><p><code>demo.js</code></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">onPullDownRefresh</span><span class="hljs-params">()</span></span> &#123;<br>  <span class="hljs-comment">//做相应的逻辑处理</span><br>&#125;,<br></code></pre></td></tr></table></figure><h3 id="3、停止下拉"><a href="#3、停止下拉" class="headerlink" title="3、停止下拉"></a>3、停止下拉</h3><p>在加载完数据后停止下拉</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript"><span class="hljs-keyword">my</span>.stopPullDownRefresh()<br></code></pre></td></tr></table></figure><p>如上案例完整代码如下</p><p><code>demo.axml</code></p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">text</span> <span class="hljs-attr">a:if</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">list.length</span> == <span class="hljs-number">0</span> ? <span class="hljs-literal">true</span>: <span class="hljs-literal">false</span> &#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span>没数据？试试下拉刷新😆<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">a:for</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">list</span> &#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span><br><span class="language-xml">    </span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.name</span>&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p><code>demo.less</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.demo</span>&#123;<br>    <span class="hljs-attribute">display</span>: flex;<br>    <span class="hljs-attribute">flex-direction</span>: column;<br>    <span class="hljs-attribute">justify-content</span>: center;<br>    <span class="hljs-attribute">align-items</span>: center;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>demo.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;usingComponents&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;styleIsolation&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;apply-shared&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;pullRefresh&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p><code>demo.ts</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title class_">Page</span>(&#123;<br>  <span class="hljs-attr">data</span>: &#123;<br>    <span class="hljs-attr">list</span>: [],<br>  &#125;,<br>  <span class="hljs-title function_">onLoad</span>(<span class="hljs-params"></span>) &#123;&#125;,<br>  <span class="hljs-title function_">onPullDownRefresh</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getList</span>()<br>  &#125;,<br>  <span class="hljs-title function_">getList</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>(&#123;<br>        <span class="hljs-attr">list</span>: [<br>          &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;螺蛳粉&#x27;</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">1</span> &#125;,<br>          &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;酸辣粉&#x27;</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">2</span> &#125;,<br>          &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;羊肉粉&#x27;</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">3</span> &#125;,<br>        ],<br>      &#125;)<br>      my.<span class="hljs-title function_">stopPullDownRefresh</span>()<br>    &#125;,<span class="hljs-number">1000</span>)<br>  &#125;,<br>&#125;)<br></code></pre></td></tr></table></figure><h2 id="（二）自定义下拉刷新"><a href="#（二）自定义下拉刷新" class="headerlink" title="（二）自定义下拉刷新"></a>（二）自定义下拉刷新</h2><p>参考文档：<a href="https://blog.csdn.net/qq_42345108/article/details/124321126">https://blog.csdn.net/qq_42345108/article/details/124321126</a></p><h1 id="自动刷新"><a href="#自动刷新" class="headerlink" title="自动刷新"></a>自动刷新</h1><h2 id="（一）my-startPullDownRefresh-方法"><a href="#（一）my-startPullDownRefresh-方法" class="headerlink" title="（一）my.startPullDownRefresh() 方法"></a>（一）my.startPullDownRefresh() 方法</h2><p>效果</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e882447ccb3b451690c83838b0856618~tplv-k3u1fbpfcp-watermark.image" alt="demo3.gif"></p><p>调用 my.startPullDownRefresh 后触发下拉刷新动画，效果与用户手动下拉刷新一致（会触发 <a href="https://opendocs.alipay.com/mini/api/wo21qk">onPullDownRefresh</a> 监听方法）。</p><p>当处理完数据刷新后，<a href="https://opendocs.alipay.com/mini/api/pmhkbb">my.stopPullDownRefresh</a> 可停止当前页面的下拉刷新。</p><p>如上案例完整代码如下</p><p><code>demo.axml</code></p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">block</span> <span class="hljs-attr">a:if</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">list.length</span> == <span class="hljs-number">0</span> ? <span class="hljs-literal">true</span>: <span class="hljs-literal">false</span> &#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">a:if</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">time</span>==<span class="hljs-number">0</span> ? <span class="hljs-literal">true</span>:<span class="hljs-literal">false</span> &#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">onTap</span>=<span class="hljs-string">&quot;handleStartRefresh&quot;</span>&gt;</span></span><br><span class="language-xml">      开启自动刷新</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">a:else</span>&gt;</span></span><br><span class="language-xml">      </span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">time</span>&#125;&#125;</span><span class="language-xml">秒后自动刷新</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">block</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">a:else</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">text</span>&gt;</span>刷新成功😆<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">a:for</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">list</span> &#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span> </span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.value</span>&#125;&#125;</span><span class="language-xml">碗---</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.name</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p><code>demo.less</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.demo</span> &#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">flex-direction</span>: column;<br>  <span class="hljs-attribute">justify-content</span>: center;<br>  <span class="hljs-attribute">align-items</span>: center;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>  <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">60px</span>;<br>  <span class="hljs-selector-class">.button</span> &#123;<br>    <span class="hljs-attribute">display</span>: flex;<br>    <span class="hljs-attribute">justify-content</span>: center;<br>    <span class="hljs-attribute">align-items</span>: center;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;<br>    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">20px</span>;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#FFFFFF</span>;<br>    <span class="hljs-attribute">background</span>: <span class="hljs-number">#FFA336</span>;<br>  &#125;<br>  <span class="hljs-selector-class">.list</span>&#123;<br>    <span class="hljs-attribute">display</span>: flex;<br>    <span class="hljs-attribute">flex-direction</span>: column;<br>    <span class="hljs-attribute">align-items</span>: center;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>demo.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;usingComponents&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;styleIsolation&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;apply-shared&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;pullRefresh&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p><code>demo.ts</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title class_">Page</span>(&#123;<br>  <span class="hljs-attr">data</span>: &#123;<br>    <span class="hljs-attr">list</span>: [],<br>    <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">time</span>: <span class="hljs-number">0</span>,<br>  &#125;,<br>  <span class="hljs-title function_">onPullDownRefresh</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>(&#123;<br>      <span class="hljs-attr">list</span>: [<br>        ...[...<span class="hljs-title class_">Array</span>(<span class="hljs-number">10</span>)].<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> (&#123;<br>          <span class="hljs-attr">value</span>: i + <span class="hljs-number">1</span>,<br>          <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;螺蛳粉&#x27;</span>,<br>        &#125;)),<br>      ],<br>    &#125;)<br>    my.<span class="hljs-title function_">stopPullDownRefresh</span>()<br>  &#125;,<br>  <span class="hljs-title function_">handleStartRefresh</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>(&#123;<br>      <span class="hljs-attr">time</span>: <span class="hljs-number">5</span>,<br>    &#125;)<br>    <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">time</span> == <span class="hljs-number">1</span>) &#123;<br>        my.<span class="hljs-title function_">startPullDownRefresh</span>()<br>        <span class="hljs-keyword">return</span><br>      &#125;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>(&#123;<br>        <span class="hljs-attr">time</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">time</span> - <span class="hljs-number">1</span>,<br>      &#125;)<br>    &#125;, <span class="hljs-number">1000</span>)<br>  &#125;,<br>&#125;)<br></code></pre></td></tr></table></figure><p>参考文档：<a href="https://opendocs.alipay.com/mini/api/ui-pulldown">https://opendocs.alipay.com/mini/api/ui-pulldown</a></p><h1 id="上拉加载"><a href="#上拉加载" class="headerlink" title="上拉加载"></a>上拉加载</h1><h2 id="（一）onReachBottom方法"><a href="#（一）onReachBottom方法" class="headerlink" title="（一）onReachBottom方法"></a>（一）onReachBottom方法</h2><p>onReachBottom在上拉触底时触发</p><p>模拟器效果展示</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/21b298179a404de9a155ee687c446fd2~tplv-k3u1fbpfcp-watermark.image" alt="demo2.gif"></p><p>如上案例完整代码如下</p><p><code>demo.axml</code></p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">view</span>&gt;</span></span><br><span class="language-xml">    没看够?试试上拉加载😆</span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">a:for</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">list</span> &#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span><br><span class="language-xml">    </span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.value</span>&#125;&#125;</span><span class="language-xml">碗-----</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.name</span>&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">a:if</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">loading</span> &#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;loading&quot;</span>&gt;</span></span><br><span class="language-xml">    正在加载中~~🌻</span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p><code>demo.less</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.demo</span>&#123;<br>    <span class="hljs-attribute">display</span>: flex;<br>    <span class="hljs-attribute">flex-direction</span>: column;<br>    <span class="hljs-attribute">justify-content</span>: center;<br>    <span class="hljs-attribute">align-items</span>: center;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>    <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-number">30px</span>;<br>    <span class="hljs-selector-class">.loading</span>&#123;<br>        <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">8px</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>demo.ts</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title class_">Page</span>(&#123;<br>  <span class="hljs-attr">data</span>: &#123;<br>    <span class="hljs-attr">list</span>: [<br>      ...[...<span class="hljs-title class_">Array</span>(<span class="hljs-number">10</span>)].<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> (&#123;<br>        <span class="hljs-attr">value</span>: i + <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;螺蛳粉&#x27;</span>,<br>      &#125;)),<br>    ],<br>    <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>,<br>  &#125;,<br>  <span class="hljs-title function_">onReachBottom</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>(&#123;<br>      <span class="hljs-attr">loading</span>: <span class="hljs-literal">true</span>,<br>    &#125;)<br>    <span class="hljs-keyword">const</span> data = [<br>      ...[...<span class="hljs-title class_">Array</span>(<span class="hljs-number">30</span>)].<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> (&#123;<br>        <span class="hljs-attr">value</span>: i + <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">list</span>.<span class="hljs-property">length</span> + <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;螺蛳粉&#x27;</span>,<br>      &#125;)),<br>    ]<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>(&#123;<br>        <span class="hljs-attr">list</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">concat</span>(data),<br>        <span class="hljs-attr">loading</span>:<span class="hljs-literal">false</span><br>      &#125;)<br>    &#125;, <span class="hljs-number">2000</span>)<br>  &#125;,<br>&#125;)<br></code></pre></td></tr></table></figure><p>参考文档：<a href="https://opendocs.alipay.com/mini/framework/page-detail#onReachBottom()">https://opendocs.alipay.com/mini/framework/page-detail#onReachBottom()</a></p><h2 id="（二）scroll-view组件的onScrollToLower方法"><a href="#（二）scroll-view组件的onScrollToLower方法" class="headerlink" title="（二）scroll-view组件的onScrollToLower方法"></a>（二）scroll-view组件的onScrollToLower方法</h2><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">scroll-view</span> <span class="hljs-attr">scroll-y</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">true</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> <span class="hljs-attr">onScrollToLower</span>=<span class="hljs-string">&quot;handleScrollToLower&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;height:100px&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">a:for</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">list</span> &#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span><br><span class="language-xml">      </span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.value</span>&#125;&#125;</span><span class="language-xml">碗-----</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.name</span>&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">scroll-view</span>&gt;</span></span><br></code></pre></td></tr></table></figure><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">handleScrollToLower</span><span class="hljs-params">()</span></span> &#123;<br>   <span class="hljs-comment">//加载数据，做数据处理</span><br> &#125;,<br></code></pre></td></tr></table></figure><p>注：scroll-view必须 <code>设置高度</code></p>]]></content>
    
    
    <categories>
      
      <category>支付宝小程序</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>支付宝小程序 | 自定义标题导航栏</title>
    <link href="/alipay-mini-program-custom-navigation/"/>
    <url>/alipay-mini-program-custom-navigation/</url>
    
    <content type="html"><![CDATA[<h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d06004a3c8964ef0830756106ef19997~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h2 id="一-、page-json"><a href="#一-、page-json" class="headerlink" title="一 、page.json"></a>一 、page.json</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;transparentTitle&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;always&quot;</span><br></code></pre></td></tr></table></figure><h2 id="二、page-axml"><a href="#二、page-axml" class="headerlink" title="二、page.axml"></a>二、page.axml</h2><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;custom-navigation&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;height:</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">systemInfo.statusBarHeight</span>+systemInfo.titleBarHeight+<span class="hljs-number">100</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">px&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="三、page-less"><a href="#三、page-less" class="headerlink" title="三、page.less"></a>三、page.less</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.custom-navigation</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">/assets/images/navigation-bg.png</span>);<br>  <span class="hljs-attribute">background-size</span>: <span class="hljs-number">100%</span> <span class="hljs-number">100%</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="四、page-ts"><a href="#四、page-ts" class="headerlink" title="四、page.ts"></a>四、page.ts</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-attr">data</span>:&#123;<br> <span class="hljs-attr">systemInfo</span>: &#123;&#125;,<br>&#125;<br><br><span class="hljs-title function_">onLoad</span>(<span class="hljs-params"></span>)&#123;<br>   my.<span class="hljs-title function_">getSystemInfo</span>(&#123;<br>      <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>(&#123;<br>          <span class="hljs-attr">systemInfo</span>: res,<br>        &#125;)<br>      &#125;,<br>   &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>支付宝小程序</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>javascript | 刷新页面的方式</title>
    <link href="/javascipt-reload-page/"/>
    <url>/javascipt-reload-page/</url>
    
    <content type="html"><![CDATA[<h2 id="方式"><a href="#方式" class="headerlink" title="方式"></a>方式</h2><table><thead><tr><th>序号</th><th>方法</th></tr></thead><tbody><tr><td>1</td><td>history.go()</td></tr><tr><td>2</td><td>location.reload()</td></tr><tr><td>3</td><td>location &#x3D; location</td></tr><tr><td>4</td><td>location.assign(location.href)</td></tr><tr><td>5</td><td>location.replace(location.href)</td></tr><tr><td>6</td><td>location.replace(document.referrer)</td></tr><tr><td>7</td><td>window.location.href &#x3D; document.URL</td></tr><tr><td>8</td><td>window.location.href &#x3D; document.location.href</td></tr><tr><td>9</td><td>window.open(document.referrer, “_parent”, “”)</td></tr><tr><td>10</td><td>document.location.href &#x3D; window.location.href</td></tr><tr><td>11</td><td>document.location.href &#x3D; document.URL</td></tr><tr><td>12</td><td>document.execCommand(“Refresh”) （已废弃）</td></tr><tr><td>13</td><td>window.navigate(url)（只针对 IE 浏览器，避免使用，不兼容）</td></tr></tbody></table><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p>1、<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/execCommand">https://developer.mozilla.org/zh-CN/docs/Web/API/Document/execCommand</a></p><p>2、<a href="https://blog.csdn.net/m0_46652188/article/details/119867048">https://blog.csdn.net/m0_46652188/article/details/119867048</a></p><p>3、<a href="https://blog.csdn.net/hu1010037197/article/details/100427393">https://blog.csdn.net/hu1010037197/article/details/100427393</a></p><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9171c0f0bb7c4a0b85daa800bea7b98b~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>vue3-readonly、shallowReadonly</title>
    <link href="/vue3-readonly%E3%80%81shallowReadonly/"/>
    <url>/vue3-readonly%E3%80%81shallowReadonly/</url>
    
    <content type="html"><![CDATA[<h2 id="readonly"><a href="#readonly" class="headerlink" title="readonly"></a>readonly</h2><p>接受一个对象（不管是响应式还是普通的）或者是一个 ref，返回的是一个原值的只读代理。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br>&lt;template&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-el</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;h-400 w-full flex flex-col justify-center items-center&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>&#123;&#123; data &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>&#123;&#123; readonlyData &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handleAddData&quot;</span>&gt;</span>增加data<span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;!mt-2&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handleAddReadonlyData&quot;</span>&gt;</span>增加readonlyData<span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br>  &lt;/template&gt;<br><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">import</span> &#123; readonly, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">const</span> data = <span class="hljs-title function_">ref</span>(<span class="hljs-number">100</span>)</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">const</span> readonlyData = <span class="hljs-title function_">readonly</span>(data)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleAddData</span> = (<span class="hljs-params"></span>) =&gt; &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    data.<span class="hljs-property">value</span>++</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleAddReadonlyData</span> = (<span class="hljs-params"></span>) =&gt; &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    readonlyData.<span class="hljs-property">value</span>++</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;</span></span><br><span class="language-javascript"><span class="language-xml">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>编辑器提示</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/44513af886e44d94808feef76617fd03~tplv-k3u1fbpfcp-watermark.image"></p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7b4edee2446840ba80f704880238007b~tplv-k3u1fbpfcp-watermark.image"></p><h2 id="shallowReadonly"><a href="#shallowReadonly" class="headerlink" title="shallowReadonly"></a>shallowReadonly</h2><p><code>readonly()</code>的浅层作用形式</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;template&gt;<br> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-el</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;h-400 w-full flex flex-col justify-center items-center&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>&#123;&#123; obj.a &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>&#123;&#123; obj.b.res &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>&#123;&#123; obj.b.c.res &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>------------------------<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>&#123;&#123; readonlyObj.a &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>&#123;&#123; readonlyObj.b.res &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>&#123;&#123; readonlyObj.b.c.res &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;!mt-2&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handleAddObj&quot;</span>&gt;</span>增加obj<span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;!mt-2&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handleAddReadonlyObj&quot;</span>&gt;</span>增加readonlyObj<span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br> &lt;/template&gt;<br><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">import</span> &#123; reactive, shallowReadonly &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> obj = <span class="hljs-title function_">reactive</span>(&#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">b</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">res</span>: <span class="hljs-number">2</span>,</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">c</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">res</span>: <span class="hljs-number">3</span>,</span></span><br><span class="language-javascript"><span class="language-xml">      &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">const</span> readonlyObj = <span class="hljs-title function_">shallowReadonly</span>(obj)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleAddObj</span> = (<span class="hljs-params"></span>) =&gt; &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    obj.<span class="hljs-property">a</span> = <span class="hljs-number">100</span></span></span><br><span class="language-javascript"><span class="language-xml">    obj.<span class="hljs-property">b</span>.<span class="hljs-property">res</span> = <span class="hljs-number">200</span></span></span><br><span class="language-javascript"><span class="language-xml">    obj.<span class="hljs-property">b</span>.<span class="hljs-property">c</span>.<span class="hljs-property">res</span> = <span class="hljs-number">300</span></span></span><br><span class="language-javascript"><span class="language-xml">  &#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleAddReadonlyObj</span> = (<span class="hljs-params"></span>) =&gt; &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    readonlyObj.<span class="hljs-property">a</span> = <span class="hljs-number">100</span></span></span><br><span class="language-javascript"><span class="language-xml">    readonlyObj.<span class="hljs-property">b</span>.<span class="hljs-property">res</span> = <span class="hljs-number">200</span></span></span><br><span class="language-javascript"><span class="language-xml">    readonlyObj.<span class="hljs-property">b</span>.<span class="hljs-property">c</span>.<span class="hljs-property">res</span> = <span class="hljs-number">300</span></span></span><br><span class="language-javascript"><span class="language-xml">  &#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0fbdc207c0b049cbbb9a57dbb707af44~tplv-k3u1fbpfcp-watermark.image"></p><p>增加 obj</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/45e2d41b3d104fedabddb1a04d871d69~tplv-k3u1fbpfcp-watermark.image"></p><p>增加 readonlyObj</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0da298e1257245c29e2277a0c199eb19~tplv-k3u1fbpfcp-watermark.image"></p>]]></content>
    
    
    <categories>
      
      <category>vue3</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vue3 | isRef、unref、toRef、toRefs</title>
    <link href="/vue3-isRef%E3%80%81unref%E3%80%81toRef%E3%80%81toRefs/"/>
    <url>/vue3-isRef%E3%80%81unref%E3%80%81toRef%E3%80%81toRefs/</url>
    
    <content type="html"><![CDATA[<h2 id="isRef"><a href="#isRef" class="headerlink" title="isRef"></a>isRef</h2><p>检查某个值是否是<code>ref</code>。是返回<code>true</code>，否则返回<code>false</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> num = <span class="hljs-title function_">ref</span>(<span class="hljs-number">10</span>);<br><span class="hljs-keyword">const</span> num1 = <span class="hljs-number">20</span>;<br><span class="hljs-keyword">const</span> num2 = <span class="hljs-title function_">reactive</span>(&#123; <span class="hljs-attr">data</span>: <span class="hljs-number">30</span> &#125;);<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">isRef</span>(num)); <span class="hljs-comment">//true</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">isRef</span>(num1)); <span class="hljs-comment">//false</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">isRef</span>(num2)); <span class="hljs-comment">//false</span><br></code></pre></td></tr></table></figure><h2 id="unref"><a href="#unref" class="headerlink" title="unref()"></a>unref()</h2><p>如果参数是<code>ref</code>，则返回内部值，否则返回参数本身。<br>这是  <code>val = isRef(val) ? val.value : val</code>  计算的一个语法糖。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">unref</span>(num));<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">unref</span>(num1));<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">unref</span>(num2));<br></code></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9b582a6f16dc4ac6b629f152c0a48f98~tplv-k3u1fbpfcp-watermark.image"></p><h2 id="toRef"><a href="#toRef" class="headerlink" title="toRef"></a>toRef</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>基于响应式对象上的某个属性，创建一个对应的 ref。创建出来的 ref 会跟源属性保持同步：更改了 ref 的值就会更改源属性的值，反之亦然。</p><ul><li>参数一：操作对象</li><li>参数二：对象属性</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> val = <span class="hljs-title function_">reactive</span>(&#123;<br>  <span class="hljs-attr">num</span>: <span class="hljs-number">1</span>,<br>&#125;);<br><br><span class="hljs-keyword">const</span> numRef = <span class="hljs-title function_">toRef</span>(val, <span class="hljs-string">&quot;num&quot;</span>);<br><br><span class="hljs-comment">// 更改该 ref 会更新源属性</span><br>numRef.<span class="hljs-property">value</span>++;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(val.<span class="hljs-property">num</span>); <span class="hljs-comment">// 2</span><br><br><span class="hljs-comment">// 更改源属性也会更新该 ref</span><br>val.<span class="hljs-property">num</span>++;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(numRef.<span class="hljs-property">value</span>); <span class="hljs-comment">// 3</span><br></code></pre></td></tr></table></figure><h3 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h3><p><code>toRef()</code>  这个函数在你想把一个 prop 的 ref 传递给一个组合式函数时会很有用当我们向组件传递 props 数据时，如果想要某个数据同父组件同步更新。当  <code>toRef</code>  与组件 props 结合使用时，关于禁止对 props 做出更改的限制依然有效。尝试将新的值传递给 ref 等效于尝试直接更改 props，这是不允许的。在这种场景下，可以使用<code>watch</code>去监听我们定义<code>ref()</code>对象。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;template&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-modal</span> <span class="hljs-attr">:show</span>=<span class="hljs-string">&quot;props.visible&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-card</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 600px&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;编辑&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">:bordered</span>=<span class="hljs-string">&quot;false&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;huge&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">role</span>=<span class="hljs-string">&quot;dialog&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">aria-modal</span>=<span class="hljs-string">&quot;true&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    &gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">n-input</span> <span class="hljs-attr">v-model:value</span>=<span class="hljs-string">&quot;inputValue&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">n-input</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">footer</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex justify-end&quot;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">n-space</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;emits(&#x27;cancel&#x27;)&quot;</span>&gt;</span>取消<span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;emits(&#x27;save&#x27;, inputValue)&quot;</span>&gt;</span>确定<span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">n-space</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">n-card</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">n-modal</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">import</span> &#123; toRef, watch, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">const</span> props = defineProps&lt;&#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">visible</span>: boolean</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">value</span>: string</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;&gt;()</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">const</span> emits = defineEmits&lt;&#123;</span></span><br><span class="language-javascript"><span class="language-xml">    (<span class="hljs-attr">e</span>: <span class="hljs-string">&#x27;save&#x27;</span>, <span class="hljs-attr">data</span>: string): <span class="hljs-keyword">void</span></span></span><br><span class="language-javascript"><span class="language-xml">    (<span class="hljs-attr">e</span>: <span class="hljs-string">&#x27;cancel&#x27;</span>): <span class="hljs-keyword">void</span></span></span><br><span class="language-javascript"><span class="language-xml">  &#125;&gt;()</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">const</span> valueToRef = <span class="hljs-title function_">toRef</span>(props, <span class="hljs-string">&#x27;value&#x27;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">const</span> inputValue = <span class="hljs-title function_">ref</span>(props.<span class="hljs-property">value</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-title function_">watch</span>(</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-function">() =&gt;</span> valueToRef.<span class="hljs-property">value</span>,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> (inputValue.<span class="hljs-property">value</span> = v)</span></span><br><span class="language-javascript"><span class="language-xml">  )</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> visible = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">true</span>)<br><span class="hljs-keyword">const</span> inputValue = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&#x27;哈哈哈哈&#x27;</span>)<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSave</span> = (<span class="hljs-params">v: string</span>) =&gt; &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;v&#x27;</span>, v)<br>&#125;<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCancel</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  visible.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span><br>&#125;<br><br>&lt;<span class="hljs-title class_">Demo</span> :value=<span class="hljs-string">&quot;inputValue&quot;</span> :visible=<span class="hljs-string">&quot;visible&quot;</span> @save=<span class="hljs-string">&quot;handleSave&quot;</span> @cancel=<span class="hljs-string">&quot;handleCancel&quot;</span> /&gt;<br></code></pre></td></tr></table></figure><p><code>注：</code>视图更新的问题</p><p>参考： <a href="https://www.cnblogs.com/web-learn/p/16725393.html">https://www.cnblogs.com/web-learn/p/16725393.html</a></p><h2 id="toRefs"><a href="#toRefs" class="headerlink" title="toRefs()"></a>toRefs()</h2><p>将一个响应式对象转换为一个普通对象，这个普通对象的每个属性都指向源对象相应的属性的<code>ref</code>。每个单独的<code>ref</code>都是使用<code>toRef()</code>创建的。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> val = <span class="hljs-title function_">reactive</span>(&#123;<br>  <span class="hljs-attr">num</span>: <span class="hljs-number">1</span>,<br>&#125;);<br><br><span class="hljs-keyword">const</span> numRef = <span class="hljs-title function_">toRefs</span>(val);<br><br><span class="hljs-comment">// 更改该 ref 会更新源属性</span><br>numRef.<span class="hljs-property">num</span>.<span class="hljs-property">value</span>++;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(val.<span class="hljs-property">num</span>); <span class="hljs-comment">// 2</span><br><br><span class="hljs-comment">// 更改源属性也会更新该 ref</span><br>val.<span class="hljs-property">num</span>++;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(numRef.<span class="hljs-property">num</span>.<span class="hljs-property">value</span>); <span class="hljs-comment">// 3</span><br></code></pre></td></tr></table></figure><p><code>toRefs()</code>解构出来的对象不会失去响应性。</p><p>如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> obj = <span class="hljs-title function_">reactive</span>(&#123;<br>  <span class="hljs-attr">num</span>: <span class="hljs-number">10</span>,<br>  <span class="hljs-attr">num2</span>: <span class="hljs-number">20</span>,<br>&#125;);<br><br><span class="hljs-keyword">const</span> &#123; num1, num2 &#125; = <span class="hljs-title function_">toRefs</span>(obj);<br></code></pre></td></tr></table></figure><p><code>toRefs</code>  在调用时只会为源对象上可以枚举的属性创建 ref。如果要为可能还不存在的属性创建 ref，请改用  <a href="https://cn.vuejs.org/api/reactivity-utilities.html#toref"><code>toRef</code></a>。</p>]]></content>
    
    
    <categories>
      
      <category>vue3</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vue3 | shallowReactive 、shallowRef、triggerRef</title>
    <link href="/vue3-shallowReactive-shallowRef/"/>
    <url>/vue3-shallowReactive-shallowRef/</url>
    
    <content type="html"><![CDATA[<h2 id="shallowReactive"><a href="#shallowReactive" class="headerlink" title="shallowReactive"></a>shallowReactive</h2><p>使用 reactive 声明的变量为递归监听，使用 shallowReactive 声明的变量为非递归监听（通俗的讲就是 reactive 创建的对象将会被 vue 内部进行递归监听，可以监听到对象中的对象是否发生了改变从而更新视图，而 shallowReactive 创建的对象只能监听到首层对象的变化）。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script setup lang=<span class="hljs-string">&quot;ts&quot;</span>&gt;<br>  <span class="hljs-keyword">import</span> &#123; shallowReactive &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br>  <span class="hljs-keyword">const</span> state = <span class="hljs-title function_">shallowReactive</span>(&#123;<br>    <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">b</span>: &#123;<br>      <span class="hljs-attr">res</span>: <span class="hljs-number">2</span>,<br>      <span class="hljs-attr">c</span>: &#123;<br>        <span class="hljs-attr">res</span>: <span class="hljs-number">3</span>,<br>      &#125;,<br>    &#125;,<br>  &#125;)<br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCLick</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    state.<span class="hljs-property">a</span> = <span class="hljs-number">100</span><br>    state.<span class="hljs-property">b</span>.<span class="hljs-property">res</span> = <span class="hljs-number">200</span><br>    state.<span class="hljs-property">b</span>.<span class="hljs-property">c</span>.<span class="hljs-property">res</span> = <span class="hljs-number">300</span><br>  &#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;template&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-el</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex flex-col justify-center items-center w-full h-200&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>&#123;&#123; state.a &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>&#123;&#123; state.b.res &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>&#123;&#123; state.b.c.res &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handleCLick&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;!w-20&quot;</span>&gt;</span>点击<span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br>&lt;/template&gt;<br></code></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/02e3909c494145c9a39eae7676ad8746~tplv-k3u1fbpfcp-watermark.image"></p><h2 id="shallowRef"><a href="#shallowRef" class="headerlink" title="shallowRef"></a>shallowRef</h2><p>其中 shallowRef 为非递归监听，ref 为递归监听，与 shallowReactive 和 reactive 不同的是 shallowRef 和 ref 监听的对象首层是 value 这一层，只有当 value 发生改变时 shallowRef 声明的变量才会在视图上进行更新。<br><code>shallowRef</code>只有对  <code>.value</code>  的访问是响应式的。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;n-el&gt;&#123;&#123; state2.<span class="hljs-property">res</span> &#125;&#125;&lt;/n-el&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;!w-20&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handleCLick&quot;</span>&gt;</span>点击<span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span></span><br><br>......<br> <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCLick</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-comment">// state2.value.res = 9999 //不会触发</span><br>  &#125;<br></code></pre></td></tr></table></figure><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e517fb608a6649ef865b464ad80de5a6~tplv-k3u1fbpfcp-watermark.image"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCLick</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-comment">//会触发</span><br>  state2.<span class="hljs-property">value</span> = &#123;<br>    <span class="hljs-attr">res</span>: <span class="hljs-number">9999</span>,<br>  &#125;;<br>&#125;;<br></code></pre></td></tr></table></figure><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dcf46ed944ca4583a2b4bd17c2f32bec~tplv-k3u1fbpfcp-watermark.image"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript">    &lt;n-el&gt;&#123;&#123; state2.<span class="hljs-property">res</span> &#125;&#125;&lt;/n-el&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>&#123;&#123; state2.res2.data &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>&#123;&#123; state2.res2.res3.data &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;!w-20&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handleCLick&quot;</span>&gt;</span>点击<span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span></span><br><br>......<br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCLick</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    state2.<span class="hljs-property">value</span> = &#123;<br>      <span class="hljs-attr">res</span>: <span class="hljs-number">100</span>,<br>      <span class="hljs-attr">res2</span>: &#123;<br>        <span class="hljs-attr">data</span>: <span class="hljs-number">200</span>,<br>        <span class="hljs-attr">res3</span>: &#123;<br>          <span class="hljs-attr">data</span>: <span class="hljs-number">300</span>,<br>        &#125;,<br>      &#125;,<br>    &#125;<br>  &#125;<br></code></pre></td></tr></table></figure><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e651404777e947f081ba08c012163757~tplv-k3u1fbpfcp-watermark.image"></p><h2 id="triggerRef"><a href="#triggerRef" class="headerlink" title="triggerRef"></a>triggerRef</h2><p>triggerRef 的作用则是手动执行与 shallowRef 关联的任何副作用，强制更新视图。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCLick</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  state.<span class="hljs-property">value</span>.<span class="hljs-property">a</span> = <span class="hljs-number">100</span><br>  state.<span class="hljs-property">value</span>.<span class="hljs-property">b</span>.<span class="hljs-property">res</span> = <span class="hljs-number">200</span><br>  state.<span class="hljs-property">value</span>.<span class="hljs-property">b</span>.<span class="hljs-property">c</span>.<span class="hljs-property">res</span> = <span class="hljs-number">300</span><br>  state2.<span class="hljs-property">value</span>.<span class="hljs-property">res</span> = <span class="hljs-number">9999</span><br>  <span class="hljs-title function_">triggerRef</span>(state2)<br>&#125;<br><br><br>......<br> &lt;n-el&gt;&#123;&#123; state2.<span class="hljs-property">res</span> &#125;&#125;&lt;/n-el&gt;<br> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>&#123;&#123; state2.res2.data &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>&#123;&#123; state2.res2.res3.data &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;!w-20&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handleCLick&quot;</span>&gt;</span>点击<span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ace01d4175634045b60ec0b4ff7a0808~tplv-k3u1fbpfcp-watermark.image"></p><p>参考文档：</p><p>1、<a href="https://www.jianshu.com/p/4e0d4fcff950">https://www.jianshu.com/p/4e0d4fcff950</a></p><p>2、<a href="https://blog.csdn.net/zxBlogs/article/details/114546382">https://blog.csdn.net/zxBlogs/article/details/114546382</a></p>]]></content>
    
    
    <categories>
      
      <category>vue3</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vue3 | slots</title>
    <link href="/vue3-slots/"/>
    <url>/vue3-slots/</url>
    
    <content type="html"><![CDATA[<h1 id="一、什么是插槽"><a href="#一、什么是插槽" class="headerlink" title="一、什么是插槽"></a>一、什么是插槽</h1><p><strong>插槽</strong>就是子组件中的提供给父组件使用的一个<strong>占位符</strong>，用<code>&lt;slot&gt;&lt;/slot&gt;</code>  表示，父组件可以在这个占位符中填充任何模板代码，如 HTML、组件等，填充的内容会替换子组件的<code>&lt;slot&gt;&lt;/slot&gt;</code>标签，父组件填充的内容称为<strong>插槽内容</strong>。</p><ul><li>子组件不提供插槽时，父组件填充失效</li><li>父组件无填充时，<code>&lt;slot&gt;&lt;/slot&gt;</code>中的<strong>备用内容</strong>会启用生效</li><li>父级模板里的所有内容都是在父级作用域中编译的，子模板里的所有内容都是在子作用域中编译的，互不影响</li></ul><h1 id="二、匿名插槽（默认插槽）"><a href="#二、匿名插槽（默认插槽）" class="headerlink" title="二、匿名插槽（默认插槽）"></a>二、匿名插槽（默认插槽）</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>在外部组件没有提供任何内容的情况下，可以使用匿名插槽提供默认内容。</p><h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><p>比如<br><code>MyComponent.vue</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;n-el&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span>这是一个默认展示的内容<span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br>&lt;/n-el&gt;<br><br><span class="hljs-comment">//组件使用</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyComponent</span>/&gt;</span></span><br></code></pre></td></tr></table></figure><p>如下：</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5f7cb2e4fabb4d0f8e0f2c4f17dfe13e~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>如果外部组件提供了插槽内容，我们提供的内容会覆盖掉默认的内容</p><p>如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">MyComponent</span>&gt;加入一段文字&lt;/<span class="hljs-title class_">MyComponent</span>&gt;<br></code></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fcace2a330894022851dfd36009649a0~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p><code>注：</code> 插槽内容可以是任意合法的模板内容，不局限于文本。</p><p>如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">MyComponent</span>&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-button</span>&gt;</span>加入一个按钮<span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span></span><br>&lt;/<span class="hljs-title class_">MyComponent</span>&gt;<br></code></pre></td></tr></table></figure><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2e6ea37a35ff41678177b3383c0f8ee7~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h1 id="三、具名插槽"><a href="#三、具名插槽" class="headerlink" title="三、具名插槽"></a>三、具名插槽</h1><h2 id="介绍-1"><a href="#介绍-1" class="headerlink" title="介绍"></a>介绍</h2><p><code>&lt;slot&gt;</code>元素带有 name 属性的插槽被称为具名插槽。</p><h2 id="使用场景-1"><a href="#使用场景-1" class="headerlink" title="使用场景"></a>使用场景</h2><p>作用于一个组件中拥有多个插槽，而<code>name</code>相当于插槽的标识，用来给各个插槽分配唯一的 ID。</p><p><code>MyComponent.vue</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;n-el <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;flex flex-col justify-center items-center h-[80vh] w-full&quot;</span>&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-el</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;text-[pink] text-[18px] mb-2&quot;</span>&gt;</span>组件相关内容<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;head&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;main&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;footer&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br>&lt;/n-el&gt;<br></code></pre></td></tr></table></figure><p>外部引用该组件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">MyComponent</span>&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot:head</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>这是头部内容<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot:main</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>这是主体内容<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot:footer</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>这是尾部内容<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot:no</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>组件中没有可匹配的插槽name，不显示<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>&lt;/<span class="hljs-title class_">MyComponent</span>&gt;<br></code></pre></td></tr></table></figure><p><code>v-slot</code>可以简写成<code>#</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">MyComponent</span>&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">head</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>这是头部内容<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">main</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>这是主体内容<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">footer</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>这是尾部内容<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">no</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>组件中没有可匹配的插槽name，不显示<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>&lt;/<span class="hljs-title class_">MyComponent</span>&gt;<br></code></pre></td></tr></table></figure><p>现在  <code>&lt;template&gt;</code>  元素中的所有内容都将被传递到相应的插槽。</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/70c05ad19c1b4839a92ea8d1c5652fe3~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2a194900097343ccb04d792893a5ece0~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p><code>注意：</code> 匿名插槽也有自己的<code>name</code>，只不过 name 会被隐式地命名为<code>default</code>。</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ab60634c7c7e4674a63af85766d62739~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>上面的写法等价于:</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/87c6836186464a22ae4c61689d16322c~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/69366fd463024b7796db3ad686f4dbdc~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h1 id="四、动态插槽名"><a href="#四、动态插槽名" class="headerlink" title="四、动态插槽名"></a>四、动态插槽名</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">MyComponent</span>&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot:</span>[<span class="hljs-attr">slotName</span>]&gt;</span></span><br><span class="language-xml">    ...</span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><br>  &lt;!-- 缩写为 --&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> #[<span class="hljs-attr">slotName</span>]&gt;</span></span><br><span class="language-xml">    ...</span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>&lt;/<span class="hljs-title class_">MyComponent</span>&gt;<br><br></code></pre></td></tr></table></figure><p>如下<br><code>MyComponent.vue</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;n-el&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>组件相关内容<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;head&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br>&lt;/n-el&gt;<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script setup lang=<span class="hljs-string">&quot;ts&quot;</span>&gt;<br>  <span class="hljs-keyword">const</span> data = <span class="hljs-string">&#x27;head&#x27;</span><br>&lt;/script&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">    ......</span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">MyComponent</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #[<span class="hljs-attr">data</span>]&gt;</span> 头部内容 <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">MyComponent</span>&gt;</span></span><br><span class="language-xml">    .......</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf234b04cf3e405c85c7770cbe8c92d2~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h1 id="五、作用域插槽"><a href="#五、作用域插槽" class="headerlink" title="五、作用域插槽"></a>五、作用域插槽</h1><h2 id="介绍-2"><a href="#介绍-2" class="headerlink" title="介绍"></a>介绍</h2><p>作用域插槽可以让父级外层组件能够访问子组件的数据，子组件向将数据提供给插槽，组件 props 传递数据的方式，子组件向插槽传递一个<code>attributes</code>，父组件通过<code>v-slot</code>带的值（任意命名）来获取子组件的数据。</p><h2 id="使用场景-2"><a href="#使用场景-2" class="headerlink" title="使用场景"></a>使用场景</h2><h3 id="一-、默认插槽"><a href="#一-、默认插槽" class="headerlink" title="(一)、默认插槽"></a>(一)、默认插槽</h3><p><code>MyComponent.vue</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;n-el <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;flex flex-col justify-center items-center h-[80vh] w-full&quot;</span>&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;螺蛳粉&quot;</span> <span class="hljs-attr">data</span>=<span class="hljs-string">&quot;10&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br>&lt;/n-el&gt;<br></code></pre></td></tr></table></figure><h4 id="写法一：-v-slot-写在组件上"><a href="#写法一：-v-slot-写在组件上" class="headerlink" title="写法一： v-slot 写在组件上"></a>写法一： v-slot 写在组件上</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">MyComponent</span> v-slot=<span class="hljs-string">&quot;res&quot;</span>&gt;<br>   <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>老板：来 &#123;&#123; res.data &#125;&#125; 份 &#123;&#123; res.content &#125;&#125; ~<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br> &lt;/<span class="hljs-title class_">MyComponent</span>&gt;<br></code></pre></td></tr></table></figure><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/39430b742a864b94a35f3946a68d0a20~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p><code>注意：</code> <code>v-slot=&quot;res&quot;</code>  可以类比这里的函数签名，和函数的参数类似，我们也可以在  <code>v-slot</code>  中使用解构：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">MyComponent</span> v-slot=<span class="hljs-string">&quot;&#123; data, content &#125;&quot;</span>&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">    老板：来 &#123;&#123; data &#125;&#125; 份 &#123;&#123; content &#125;&#125; ~</span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br>&lt;/<span class="hljs-title class_">MyComponent</span>&gt;<br></code></pre></td></tr></table></figure><h4 id="写法二：-v-slot-写在-template-上"><a href="#写法二：-v-slot-写在-template-上" class="headerlink" title="写法二： v-slot 写在 template 上"></a>写法二： v-slot 写在 template 上</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">MyComponent</span>&gt;<br>   <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot:default</span>=<span class="hljs-string">&quot;res&quot;</span>&gt;</span></span><br><span class="language-xml">     <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>老板：来 &#123;&#123; res.data &#125;&#125; 份 &#123;&#123; res.content &#125;&#125; ~<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">   <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><br>   <span class="hljs-comment">//或者</span><br>   <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>=<span class="hljs-string">&quot;res&quot;</span>&gt;</span></span><br><span class="language-xml">     <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>老板：来 &#123;&#123; res.data &#125;&#125; 份 &#123;&#123; res.content &#125;&#125; ~<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">   <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><br> &lt;/<span class="hljs-title class_">MyComponent</span>&gt;<br></code></pre></td></tr></table></figure><h3 id="二-、具名插槽"><a href="#二-、具名插槽" class="headerlink" title="(二)、具名插槽"></a>(二)、具名插槽</h3><p>具名作用域插槽的工作方式也是类似的，插槽 props 可以作为  <code>v-slot</code>  指令的值被访问到：<code>v-slot:name=&quot;slotProps&quot;</code>。当使用缩写时是这样：</p><p><code>MyComponent.vue</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;n-el <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;flex flex-col justify-center items-center h-[80vh] w-full&quot;</span>&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;北京烤鸭&quot;</span> <span class="hljs-attr">data</span>=<span class="hljs-string">&quot;5&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;food1&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;长沙臭豆腐&quot;</span> <span class="hljs-attr">data</span>=<span class="hljs-string">&quot;15&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;food2&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br>&lt;/n-el&gt;<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">MyComponent</span>&gt;<br>   <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">food1</span>=<span class="hljs-string">&quot;res&quot;</span>&gt;</span></span><br><span class="language-xml">     <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>老板：来 &#123;&#123; res.data &#125;&#125; 份 &#123;&#123; res.content &#125;&#125; ~<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">   <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>   <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">food2</span>=<span class="hljs-string">&quot;res&quot;</span>&gt;</span></span><br><span class="language-xml">     <span class="hljs-tag">&lt;<span class="hljs-name">n-el</span>&gt;</span>老板：来 &#123;&#123; res.data &#125;&#125; 份 &#123;&#123; res.content &#125;&#125; ~<span class="hljs-tag">&lt;/<span class="hljs-name">n-el</span>&gt;</span></span><br><span class="language-xml">   <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br> &lt;/<span class="hljs-title class_">MyComponent</span>&gt;<br></code></pre></td></tr></table></figure><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c6af0f22883646c2b657d4b75c78352b~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>]]></content>
    
    
    <categories>
      
      <category>vue3</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vue-study</title>
    <link href="/vue-study/"/>
    <url>/vue-study/</url>
    
    <content type="html"><![CDATA[<h1 id="一、全局-API"><a href="#一、全局-API" class="headerlink" title="一、全局 API"></a>一、全局 API</h1><h2 id="一-、createApp"><a href="#一-、createApp" class="headerlink" title="(一)、createApp()"></a>(一)、createApp()</h2><p>创建一个应用实例。</p><p>内联根组件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(&#123;<br>  <span class="hljs-comment">//.....</span><br>&#125;);<br></code></pre></td></tr></table></figure><p>使用从别处导入的组件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./App.vue&quot;</span>;<br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>);<br></code></pre></td></tr></table></figure><h2 id="二-、app-mount"><a href="#二-、app-mount" class="headerlink" title="(二)、app.mount()"></a>(二)、app.mount()</h2><p>将应用实例挂载在一个容器元素中。</p><p>参数可以是一个实际的 DOM 元素或者一个 CSS 选择器</p><p>CSS 选择器为参数</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-comment">/* ... */</span>);<br>app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&quot;#app&quot;</span>);<br></code></pre></td></tr></table></figure><p>DOM 元素为参数</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">app.<span class="hljs-title function_">mount</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">firstChild</span>);<br></code></pre></td></tr></table></figure><h2 id="三-、app-unmount"><a href="#三-、app-unmount" class="headerlink" title="(三)、app.unmount()"></a>(三)、app.unmount()</h2><p>卸载一个已挂载的应用实例。</p><h2 id="四-、app-provide"><a href="#四-、app-provide" class="headerlink" title="(四)、app.provide()"></a>(四)、app.provide()</h2><p>提供一个值，可以给后代的所有组件使用</p><p>参数 1：注入的 key<br>参数 2：提供的值</p><p>示例：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-comment">/*...*/</span>);<br>app.<span class="hljs-title function_">provide</span>(<span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-string">&quot;hello&quot;</span>);<br></code></pre></td></tr></table></figure><p>后代组件使用</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; inject &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">inject</span>(<span class="hljs-string">&quot;message&quot;</span>)); <span class="hljs-comment">// &#x27;hello&#x27;</span><br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="五-、app-directive-自定义指令"><a href="#五-、app-directive-自定义指令" class="headerlink" title="(五)、app.directive 自定义指令"></a>(五)、app.directive 自定义指令</h2><p>参考文档：<a href="https://blog.csdn.net/weixin_52203618/article/details/127867548">https://blog.csdn.net/weixin_52203618/article/details/127867548</a></p><h2 id="六-、app-use-安装一个插件"><a href="#六-、app-use-安装一个插件" class="headerlink" title="(六)、app.use() 安装一个插件"></a>(六)、app.use() 安装一个插件</h2><ul><li>参数 1：插件本身</li><li>参数 2：传递给插件的选项</li></ul><h2 id="七-、app-mixin-混合"><a href="#七-、app-mixin-混合" class="headerlink" title="(七)、app.mixin()混合"></a>(七)、app.mixin()混合</h2><p>应用一个全局 mixin。一个全局的 mixin 会作用于应用中的每个组件实例。</p><h2 id="（八）、app-version"><a href="#（八）、app-version" class="headerlink" title="（八）、app.version"></a>（八）、app.version</h2><p>当前应用所使用的 vue 版本号。</p><h2 id="（九）、app-config-globalProperties"><a href="#（九）、app-config-globalProperties" class="headerlink" title="（九）、app.config.globalProperties"></a>（九）、app.config.globalProperties</h2><p>一个用于注册能够被应用内所有组件实例访问到的全局属性的对象。<br>用法</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">app.<span class="hljs-property">config</span>.<span class="hljs-property">globalProperties</span>.<span class="hljs-property">msg</span> = <span class="hljs-string">&quot;hello&quot;</span>;<br></code></pre></td></tr></table></figure><p>这使得 msg 在应用的任意组件模板上都可以使用，并且也可以通过任意组件实例的 this 访问到</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">msg</span>); <span class="hljs-comment">// &#x27;hello&#x27;</span><br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h1 id="二、通用-API"><a href="#二、通用-API" class="headerlink" title="二、通用 API"></a>二、通用 API</h1><h2 id="一-、version"><a href="#一-、version" class="headerlink" title="(一)、version"></a>(一)、version</h2><p>暴露当前所使用的 Vue 版本。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; version &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(version);<br></code></pre></td></tr></table></figure><h2 id="二-、nextTick"><a href="#二-、nextTick" class="headerlink" title="(二)、nextTick()"></a>(二)、nextTick()</h2><p>等待下一次 DOM 更新刷新的工具方法。</p><p>当你在 Vue 中更改响应式状态时，最周的 DOM 更新并不是同步生效的，而是由 Vue 将他们缓存在一个队列中，直到下一个”tick”才一起执行。这样是为了确保每个组件无论发生多少次状态改变，都仅执行一次更新。</p><p><code>nextTick()</code>可以在状态改变后立即使用，以等待 DOM 更新完成。你可以传递一个回调函数作为参数，或者<code>await</code>返回的<code>Promise</code>。</p><h1 id="三、组合式-API"><a href="#三、组合式-API" class="headerlink" title="三、组合式 API"></a>三、组合式 API</h1><h2 id="一-、readonly"><a href="#一-、readonly" class="headerlink" title="(一)、readonly()"></a>(一)、readonly()</h2><p>说明：接受一个<code>对象</code>（不管是响应式的还是普通的）或者是一个 ref，返回的是一个只读的原值。<br>细节：它是深层的。即不管原值是多少个子节点，孙节点，都是只读。<br>用途：保护某些数据不让它有意外的被修改。</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>hexo | 搭建个人网站</title>
    <link href="/hexo-start/"/>
    <url>/hexo-start/</url>
    
    <content type="html"><![CDATA[<h1 id="一、安装-hexo"><a href="#一、安装-hexo" class="headerlink" title="一、安装 hexo"></a>一、安装 hexo</h1>]]></content>
    
    
    <categories>
      
      <category>hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
